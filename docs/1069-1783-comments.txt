------------------------------------------------------------------------
r1069 | daquino | 2009-07-07 00:37:45 +0000 (Tue, 07 Jul 2009) | 1 line

Created separate function for joining from game list so the previous bug doesn't end up trying to join whatever is currently in the host ip/port fields.
------------------------------------------------------------------------
r1070 | sirlemonhead | 2009-07-16 21:31:54 +0000 (Thu, 16 Jul 2009) | 1 line


------------------------------------------------------------------------
r1071 | daquino | 2009-07-21 00:43:51 +0000 (Tue, 21 Jul 2009) | 1 line

Migrated to visual studios 2008
------------------------------------------------------------------------
r1072 | sirlemonhead | 2009-07-21 22:24:39 +0000 (Tue, 21 Jul 2009) | 3 lines

started renderer abstraction work. models.c and polys.c compile with changes. now passing RENDEROBJECT (name subject to change :p) struct instead of d3d api com objects to generalise the rendering function calls.

fixed a minor aesthetic typo with the comment blocks 
------------------------------------------------------------------------
r1073 | sirlemonhead | 2009-07-26 23:59:24 +0000 (Sun, 26 Jul 2009) | 1 line


------------------------------------------------------------------------
r1074 | sirlemonhead | 2009-07-29 17:29:30 +0000 (Wed, 29 Jul 2009) | 4 lines

-Added D3D9 device creation code.
-Fixed pointer passing to FSLockVertexBuffer. Now passing pointer to pointer as the original pointer we get from d3d9 will go out of scope when the function exits.
-Fixed some other incorrect function calls where I was passing too many parameters
-Now correctly read in vertex data from model files. Using the original vertex declaration struct to ensure that pointer arithmetic is correctly incrementing by sizeof(vertexstruct). the original struct had an extra DWORD value that the new struct doesn't have.
------------------------------------------------------------------------
r1075 | sirlemonhead | 2009-08-01 18:34:22 +0000 (Sat, 01 Aug 2009) | 10 lines

fixed some stupid programming mistakes on my part
Menu system now renders but is untextured and unlit. Geometry is drawn correctly and confirmed in Pix tool.

-added some render states
-added some error checking code
-added screen clear
-uncommented call to ProcessVduItems in D3dapp.c
-removed useless wFlags variable in D3DTRIANGLE
-Mxload and Mxaload should now both work
-set TintModelVertices and TintOneVertex functions to return before doing any work. Do we need to use index buffers? I think so..
------------------------------------------------------------------------
r1076 | sirlemonhead | 2009-08-03 22:56:42 +0000 (Mon, 03 Aug 2009) | 1 line

changed rendering code to start using index buffers. 
------------------------------------------------------------------------
r1077 | daquino | 2009-09-08 00:40:32 +0000 (Tue, 08 Sep 2009) | 3 lines

Attempting a port of dx to opengl.


------------------------------------------------------------------------
r1078 | daquino | 2009-09-10 22:38:55 +0000 (Thu, 10 Sep 2009) | 5 lines

Defined a function.
reset num_texture_groups just to be safe.
added more debug output.
Moved ibIndex to outside the loop fixing a bug.
Set renderObject -> numTriangles to be aggregate across all texture groups fixing a bug.
------------------------------------------------------------------------
r1079 | daquino | 2009-09-10 22:52:40 +0000 (Thu, 10 Sep 2009) | 3 lines

Deleted everything to do with fog!
We can just add it back in later using much better methods.

------------------------------------------------------------------------
r1080 | sirlemonhead | 2009-09-11 00:36:39 +0000 (Fri, 11 Sep 2009) | 1 line

added code to handle multiple texture groups per object. we now keep track of how many textures we need to set per object. If there is more than one texture group associated with an object, we split our render call up, changing the texture when required.
------------------------------------------------------------------------
r1081 | daquino | 2009-09-11 00:57:49 +0000 (Fri, 11 Sep 2009) | 2 lines

enabled ANISOTROPIC and LINEAR filtering
 
------------------------------------------------------------------------
r1082 | daquino | 2009-09-12 00:11:21 +0000 (Sat, 12 Sep 2009) | 1 line

Changed the back buffer clearing to use black to fix intended rendering.
------------------------------------------------------------------------
r1083 | daquino | 2009-09-12 01:46:47 +0000 (Sat, 12 Sep 2009) | 1 line

Fixed a bug.  tab[] in read_EnemyType() did not include ENEMY_Boss_LittleGeek like in ENEMY_* enum in enemies.h
------------------------------------------------------------------------
r1084 | daquino | 2009-09-12 01:51:00 +0000 (Sat, 12 Sep 2009) | 1 line

created the vertex buffer using the same methods in mxload.c
------------------------------------------------------------------------
r1085 | daquino | 2009-09-13 16:48:11 +0000 (Sun, 13 Sep 2009) | 1 line

Updating my notes.
------------------------------------------------------------------------
r1086 | sirlemonhead | 2009-09-13 17:57:27 +0000 (Sun, 13 Sep 2009) | 1 line

started adding code to display on screen text using screenpoly.c file. Support added for TLVERTEX format vertexes (pre-transformed vertex data)
------------------------------------------------------------------------
r1087 | daquino | 2009-09-13 18:19:03 +0000 (Sun, 13 Sep 2009) | 4 lines

renamed the font surface to something more descriptive.
called InitFont() in InitView().
created FSBlit() and FSLoadBitmap() to support bitmaps and bitmapped fonts.
added util.h to d3d_render.cpp to support DebugPrintf()
------------------------------------------------------------------------
r1088 | daquino | 2009-09-13 19:42:00 +0000 (Sun, 13 Sep 2009) | 1 line

Bug in commenting.
------------------------------------------------------------------------
r1089 | daquino | 2009-09-13 20:51:52 +0000 (Sun, 13 Sep 2009) | 1 line

commenting bug.
------------------------------------------------------------------------
r1090 | daquino | 2009-09-13 21:43:03 +0000 (Sun, 13 Sep 2009) | 1 line

Small comment error.
------------------------------------------------------------------------
r1091 | daquino | 2009-09-13 21:55:07 +0000 (Sun, 13 Sep 2009) | 2 lines

converted title fonts to use the new d3d9 methods for blitting.
re-enabled InitTitle() since it called out to InitFont() and InitTitleFont().
------------------------------------------------------------------------
r1092 | daquino | 2009-09-13 23:18:07 +0000 (Sun, 13 Sep 2009) | 2 lines

Changed back buffer and the bit map surface to support the same 32 bit alpha format.
This makes the text transparent!
------------------------------------------------------------------------
r1093 | daquino | 2009-09-13 23:33:24 +0000 (Sun, 13 Sep 2009) | 1 line

Converted some weird blitting function.
------------------------------------------------------------------------
r1094 | daquino | 2009-09-14 00:44:07 +0000 (Mon, 14 Sep 2009) | 1 line

Temporary perhaps permanent updates to render the loading box.
------------------------------------------------------------------------
r1095 | daquino | 2009-09-14 22:43:36 +0000 (Mon, 14 Sep 2009) | 4 lines

Added support for specifying the destination of the blit in FSBlit.
Added the definitions to d3dappi.h header file.
Fixed a bug in Printuint16AnySurface() it now properly copies fonts from the font surface again.

------------------------------------------------------------------------
r1096 | daquino | 2009-09-14 23:58:06 +0000 (Mon, 14 Sep 2009) | 4 lines

re-enabled Printuint16AnySurface() but removed the deprecated flags argument as d3d9 does not support this feature anymore.
Ported GeneralBlt() to use new FSBlit() function and re-enabled all the surfaces and what not.
Converted GeneralBltFast() to GeneralBlt() as they both did the same thing and passing blit flags isn't supported anymore in d3d9.
Updated/Added notes where appropriate.
------------------------------------------------------------------------
r1097 | daquino | 2009-09-15 01:05:43 +0000 (Tue, 15 Sep 2009) | 3 lines

all the screen mode detection is not needed as the new code properly detects if the larger textures are needed.
set palette appears to be required in old d3d api it's not needed anymore.
ReInitTitleFont is never called anymore and surfaces don't appear to get lost in the new d3d...
------------------------------------------------------------------------
r1098 | daquino | 2009-09-15 21:12:53 +0000 (Tue, 15 Sep 2009) | 1 line

Accidentally committed these lines.
------------------------------------------------------------------------
r1099 | sirlemonhead | 2009-09-15 23:08:13 +0000 (Tue, 15 Sep 2009) | 1 line

got mload.c loading working ( I think ) and can now get ingame to the volcano level, though nothing is currently visible ingame bar HUD stuff. Also changed a few functions responsible for tweaking vertex values
------------------------------------------------------------------------
r1100 | daquino | 2009-09-15 23:20:34 +0000 (Tue, 15 Sep 2009) | 7 lines

FSLoadBitmap() upgraded to support colour key argument.
FSColourKeyBlack define to denote black colour key.
Updated old DDLoadBitmap() calls to to use FSLoadBitmap()
Ported ReInitFont() to InitFont() cause there is never reiniting anymore.
Removed the commented screen size detection lines in InitFont() as the current method handles all cases.
SetPalette() lines are not needed and are handled by FSLoadBitmap()
Still need to fix ReleaseDDSurf()...
------------------------------------------------------------------------
r1101 | daquino | 2009-09-15 23:27:48 +0000 (Tue, 15 Sep 2009) | 1 line

Added check for null pointer before attempting to free...
------------------------------------------------------------------------
r1102 | sirlemonhead | 2009-09-16 00:01:21 +0000 (Wed, 16 Sep 2009) | 1 line

some small fixes. nothing much improved..
------------------------------------------------------------------------
r1103 | daquino | 2009-09-16 22:02:54 +0000 (Wed, 16 Sep 2009) | 2 lines

Very strange but this change actually fixes the RenderScene failed introduced last commit.
Just seems like HRESULT was not being processed correctly because S_OK was being returned.
------------------------------------------------------------------------
r1104 | daquino | 2009-09-16 22:04:20 +0000 (Wed, 16 Sep 2009) | 1 line

Fixed small bug on line 43 of this diff... block for if(white out) was commented causing execution to flow to the next block unintentionally...
------------------------------------------------------------------------
r1105 | daquino | 2009-09-18 00:38:51 +0000 (Fri, 18 Sep 2009) | 2 lines

turned on screen clearing permanantly for time being cause we can't see the walls...
removed a pointless line of code.
------------------------------------------------------------------------
r1106 | daquino | 2009-09-18 00:44:41 +0000 (Fri, 18 Sep 2009) | 1 line

Converted all D3DAppIClearBuffers() calls to FSClear().
------------------------------------------------------------------------
r1107 | daquino | 2009-09-18 01:48:51 +0000 (Fri, 18 Sep 2009) | 3 lines

Converted FSClear() and D3DAppClearScreenOnly() calls to FSClearBlack() for basic screen clears.
Cleaned up the ClearBuffers() and ClearZBuffer() functions.

------------------------------------------------------------------------
r1108 | daquino | 2009-09-18 01:57:45 +0000 (Fri, 18 Sep 2009) | 1 line

Missed one on the last commit.
------------------------------------------------------------------------
r1109 | daquino | 2009-09-19 02:17:47 +0000 (Sat, 19 Sep 2009) | 1 line

Fixed bug in mload routine.  level vertex data now loads properly.
------------------------------------------------------------------------
r1110 | daquino | 2009-09-19 02:18:10 +0000 (Sat, 19 Sep 2009) | 1 line

Small debug addition.
------------------------------------------------------------------------
r1111 | daquino | 2009-09-19 02:49:11 +0000 (Sat, 19 Sep 2009) | 1 line

Set the texture during mxv loading so the levels walls have textures.
------------------------------------------------------------------------
r1112 | daquino | 2009-09-19 03:26:53 +0000 (Sat, 19 Sep 2009) | 1 line

Fixed the holo model crash. Still need to fix the texture mapping...
------------------------------------------------------------------------
r1113 | daquino | 2009-09-19 16:29:43 +0000 (Sat, 19 Sep 2009) | 1 line

The target here is never allocated so we shouldn't free it.
------------------------------------------------------------------------
r1114 | daquino | 2009-09-20 17:28:29 +0000 (Sun, 20 Sep 2009) | 2 lines

Added draw_object which is a generic call that supports drawing index buffered data or straight vertex buffer data...
Updated PolyDispGroupUnclipped() to still draw by using the draw_vertex_buffer() method...
------------------------------------------------------------------------
r1115 | daquino | 2009-09-20 18:11:37 +0000 (Sun, 20 Sep 2009) | 1 line

Just guaranteeing that the other blocks are properly setting up the object for drawing.
------------------------------------------------------------------------
r1116 | daquino | 2009-09-20 19:06:10 +0000 (Sun, 20 Sep 2009) | 3 lines

Created draw_2d_object() that detects if the method is indexed or not.
Created draw_2d_vertex_buffer() for straight vertex data.
Renamed FSDrawPretransformedVertexBuffer() to draw_2d_indexed_buffer().
------------------------------------------------------------------------
r1117 | daquino | 2009-09-20 20:54:42 +0000 (Sun, 20 Sep 2009) | 1 line

Protect against division by 0.
------------------------------------------------------------------------
r1118 | daquino | 2009-09-20 21:01:40 +0000 (Sun, 20 Sep 2009) | 1 line

Added support for multiple texture groups in non indexed draw functions.
------------------------------------------------------------------------
r1119 | daquino | 2009-09-20 21:07:54 +0000 (Sun, 20 Sep 2009) | 2 lines

Converted the polys to use vertex buffer array.
Seems to be working good now just need some transparency added.
------------------------------------------------------------------------
r1120 | daquino | 2009-09-20 21:22:57 +0000 (Sun, 20 Sep 2009) | 1 line

Converted the screenpolys to use vertex buffer array.
------------------------------------------------------------------------
r1121 | daquino | 2009-09-20 22:06:56 +0000 (Sun, 20 Sep 2009) | 1 line

enabled line rendering again.  seems to work but flawed like the rest of the vertex calls.
------------------------------------------------------------------------
r1122 | daquino | 2009-09-21 20:54:37 +0000 (Mon, 21 Sep 2009) | 1 line

Shouldn't have been committed.
------------------------------------------------------------------------
r1123 | daquino | 2009-09-24 22:08:45 +0000 (Thu, 24 Sep 2009) | 1 line

cleaned up the water.c file a bit but it still needs work.
------------------------------------------------------------------------
r1124 | daquino | 2009-09-24 22:09:56 +0000 (Thu, 24 Sep 2009) | 1 line

These files are pretty much not used.
------------------------------------------------------------------------
r1125 | daquino | 2009-09-24 22:13:30 +0000 (Thu, 24 Sep 2009) | 4 lines

added FSCreateDynamicVertexBuffer() for dynamic buffers that get regenerated each frame.
these buffers will be lost on things like alt+tab...
but that's ok cause the next frame will redraw them...
this just makes it faster.
------------------------------------------------------------------------
r1126 | daquino | 2009-09-24 22:14:43 +0000 (Thu, 24 Sep 2009) | 2 lines

Got one of the routines to render properly by generating the real list of vertex data from the hard coded face code in the function.
This will have to get redone with index buffers.
------------------------------------------------------------------------
r1127 | daquino | 2009-09-24 22:26:00 +0000 (Thu, 24 Sep 2009) | 1 line

Cleaning up the init to be more simplified.
------------------------------------------------------------------------
r1128 | daquino | 2009-09-24 22:30:58 +0000 (Thu, 24 Sep 2009) | 1 line

Added another render object to port face/index based routines.
------------------------------------------------------------------------
r1129 | daquino | 2009-09-24 22:31:11 +0000 (Thu, 24 Sep 2009) | 1 line

Hopefully this won't blow up anymore.
------------------------------------------------------------------------
r1130 | daquino | 2009-09-24 22:52:39 +0000 (Thu, 24 Sep 2009) | 1 line

missed a semicolon... needed to add back those things for now to get around errors...
------------------------------------------------------------------------
r1131 | daquino | 2009-09-24 22:59:10 +0000 (Thu, 24 Sep 2009) | 1 line

after referencing the original code it used the same type of exec buffer for all these render bufs so I'm reverting to that while i develop the index buffer functionality.
------------------------------------------------------------------------
r1132 | daquino | 2009-09-25 00:05:39 +0000 (Fri, 25 Sep 2009) | 1 line

moved back to index/face buffers for one of the routines.
------------------------------------------------------------------------
r1133 | daquino | 2009-09-25 00:31:45 +0000 (Fri, 25 Sep 2009) | 1 line

added the material in...
------------------------------------------------------------------------
r1134 | daquino | 2009-09-26 15:59:29 +0000 (Sat, 26 Sep 2009) | 3 lines

Updated the other 2dPolys.c function to use faces.
Fixed the index count by multiplying triangles by 3.
Still not rendering properly using index buffers though.
------------------------------------------------------------------------
r1135 | daquino | 2009-09-26 18:04:27 +0000 (Sat, 26 Sep 2009) | 1 line


------------------------------------------------------------------------
r1136 | daquino | 2009-09-26 18:06:00 +0000 (Sat, 26 Sep 2009) | 1 line

last commit should not have been committed.
------------------------------------------------------------------------
r1137 | daquino | 2009-09-26 18:39:02 +0000 (Sat, 26 Sep 2009) | 1 line

Added back generating straight vertex lists until the face based method can be fixed.
------------------------------------------------------------------------
r1138 | daquino | 2009-09-27 03:45:41 +0000 (Sun, 27 Sep 2009) | 1 line

This should be enabled in case code wants to use it instead of offsetting the index buffer.
------------------------------------------------------------------------
r1139 | daquino | 2009-09-27 03:46:36 +0000 (Sun, 27 Sep 2009) | 1 line

Added a missing FmPolyVertPnt++; that got the indexed method to at least print a single triangle now !
------------------------------------------------------------------------
r1140 | daquino | 2009-09-27 04:24:51 +0000 (Sun, 27 Sep 2009) | 1 line

Small mistake fixed in the index pointer.
------------------------------------------------------------------------
r1141 | daquino | 2009-09-27 05:09:08 +0000 (Sun, 27 Sep 2009) | 1 line

Converted polys.c to use index buffers correctly.
------------------------------------------------------------------------
r1142 | daquino | 2009-09-27 05:48:52 +0000 (Sun, 27 Sep 2009) | 4 lines

Added a 4th render buff for pre-transformed vertexes.
Updated screenpolys.c to use the index buffers properly.
Updated the ClipBox() routine to support the new d3d9 api.
Still a bit of a rendering issue it seems.
------------------------------------------------------------------------
r1143 | daquino | 2009-09-27 06:07:39 +0000 (Sun, 27 Sep 2009) | 1 line

Added small note to lines.c and a fix for title.c
------------------------------------------------------------------------
r1144 | daquino | 2009-09-27 06:51:07 +0000 (Sun, 27 Sep 2009) | 2 lines

Forgot to remove the StartVert + parts...
If you comment out draw_object's internals you'll see that the highlight box is rendering better but it's not in the correct location or orientation.
------------------------------------------------------------------------
r1145 | daquino | 2009-09-27 06:51:46 +0000 (Sun, 27 Sep 2009) | 2 lines

Forgot to remove the StartVert + parts...
This fixes the weird triangles that would result when shooting pulsars or other 3d polys.
------------------------------------------------------------------------
r1146 | daquino | 2009-09-27 08:46:06 +0000 (Sun, 27 Sep 2009) | 1 line

Objects were not being cleaned up properly.
------------------------------------------------------------------------
r1147 | daquino | 2009-09-27 08:49:28 +0000 (Sun, 27 Sep 2009) | 6 lines

Scatter lens flair would overflow the pointer and destroy the next render buffer.
Created INCREASE_TEXTURE_GROUPS() to safely increment the number of texture groups and detect overflow.
Scatter issue resolved.
But shooting to many bullets or attempting to go to the biker setup will cause INCREASE_TEXTURE_GROUPS() to assert() because of way to many texture groups.
Rendering should be more incremental... Most likely will need to call draw from within the inside loops.
Unless there is a bug somewhere that would stop such high number of texture groups being needed.
------------------------------------------------------------------------
r1148 | daquino | 2009-09-27 14:15:40 +0000 (Sun, 27 Sep 2009) | 1 line

This was a mistake.  Each triangle has 3 vertexes.
------------------------------------------------------------------------
r1149 | daquino | 2009-09-27 15:06:03 +0000 (Sun, 27 Sep 2009) | 2 lines

small tweak for now so we can see through the portals.
will fix this later.
------------------------------------------------------------------------
r1150 | daquino | 2009-09-27 15:10:16 +0000 (Sun, 27 Sep 2009) | 6 lines

Was getting buffer overruns everywhere so had to increase the size of MAX_TEXTURE_GROUPS to a really large number.
But this would cause the compiler to freak because GROUP's include RENDEROBJECT's which would cause about 2 gig's on the stack allocation.
Temporarily created LEVELRENDEROBJECT which is a clone of RENDEROBJECT but has less textureGroups since levels were fine with a max of 8 groups...
This will need to be changed later....
We would probably need to make textureGroups a pointer and then malloc for Mload() and friends, and we can get away with creating them on the stack for dynamic data in 2dpolys.c/screenpolys.c/polys.c etc...

------------------------------------------------------------------------
r1151 | daquino | 2009-09-27 22:18:16 +0000 (Sun, 27 Sep 2009) | 5 lines

Enabled lod levels in rear view.
Increased the full screen lod distance calculation to be about 4 times as far away.
documented the lod code so it can be tweaked later or configurable settings added.
don't use auto detail visual setting as it will make things ugly...

------------------------------------------------------------------------
r1152 | daquino | 2009-09-28 15:55:24 +0000 (Mon, 28 Sep 2009) | 1 line

.RTL real time lights file format.
------------------------------------------------------------------------
r1153 | daquino | 2009-09-28 16:05:24 +0000 (Mon, 28 Sep 2009) | 1 line

real time light (.rtl) filder reader
------------------------------------------------------------------------
r1154 | daquino | 2009-09-28 17:09:17 +0000 (Mon, 28 Sep 2009) | 1 line

converted rtl_reader to output lua tables
------------------------------------------------------------------------
r1155 | daquino | 2009-09-28 17:12:09 +0000 (Mon, 28 Sep 2009) | 1 line

added a comma to the string table macro
------------------------------------------------------------------------
r1156 | daquino | 2009-09-28 17:14:12 +0000 (Mon, 28 Sep 2009) | 1 line

fixed a bug... how in the world that previously compile?
------------------------------------------------------------------------
r1157 | daquino | 2009-09-28 17:40:05 +0000 (Mon, 28 Sep 2009) | 1 line

fixed lua formating. made the header lua as well.
------------------------------------------------------------------------
r1158 | daquino | 2009-09-28 17:44:19 +0000 (Mon, 28 Sep 2009) | 1 line

added comma after each light
------------------------------------------------------------------------
r1159 | daquino | 2009-09-28 18:08:17 +0000 (Mon, 28 Sep 2009) | 1 line

renamed macros to capital letters, changed float format to use %g, created macros for opening/closing groups
------------------------------------------------------------------------
r1160 | daquino | 2009-09-28 18:10:17 +0000 (Mon, 28 Sep 2009) | 1 line

fixed the OPEN macro
------------------------------------------------------------------------
r1161 | daquino | 2009-09-28 18:13:43 +0000 (Mon, 28 Sep 2009) | 1 line

got rid of warning
------------------------------------------------------------------------
r1162 | daquino | 2009-09-28 18:19:10 +0000 (Mon, 28 Sep 2009) | 1 line

missed a new line
------------------------------------------------------------------------
r1163 | daquino | 2009-09-29 13:54:47 +0000 (Tue, 29 Sep 2009) | 1 line

fixed warning about return value
------------------------------------------------------------------------
r1164 | daquino | 2009-09-29 20:26:12 +0000 (Tue, 29 Sep 2009) | 2 lines

CurrDriver was used to test if we were running in software mode.
Removed this where appropriate.
------------------------------------------------------------------------
r1165 | daquino | 2009-09-29 20:54:36 +0000 (Tue, 29 Sep 2009) | 1 line

Ported cull render state calls.
------------------------------------------------------------------------
r1166 | daquino | 2009-09-29 21:02:45 +0000 (Tue, 29 Sep 2009) | 1 line

Stupid fixes.
------------------------------------------------------------------------
r1167 | daquino | 2009-09-29 21:05:20 +0000 (Tue, 29 Sep 2009) | 2 lines

just hiding this declaration to note it's not used anymore.
will eventually probably toast this whole file.
------------------------------------------------------------------------
r1168 | daquino | 2009-09-29 21:27:37 +0000 (Tue, 29 Sep 2009) | 3 lines

transparency here is working well except for quantum.
transexe.c handles transparencies for static pre loaded objects *load.c
other areas work fine so something must be wrong with quantum texture.
------------------------------------------------------------------------
r1169 | daquino | 2009-09-29 22:10:33 +0000 (Tue, 29 Sep 2009) | 1 line

Ported state calls for 2d polygon zbuffer and filtering.
------------------------------------------------------------------------
r1170 | daquino | 2009-09-29 22:11:03 +0000 (Tue, 29 Sep 2009) | 1 line

Best polys.c mode i could find for now.  still working on the other two which appear to never go off.
------------------------------------------------------------------------
r1171 | daquino | 2009-09-29 22:11:52 +0000 (Tue, 29 Sep 2009) | 1 line

best mode i could find for 2dpolys.c (face me polygons).. still waiting for the other one to go off to test.
------------------------------------------------------------------------
r1172 | daquino | 2009-09-29 22:15:21 +0000 (Tue, 29 Sep 2009) | 1 line

Fixed the 2d screen polys to show up.  SetFVF was setting 3d vertex format.  When in fact we are passing 2d vertex data...  So text/highlightbox/lense-flair and anything 2d would end up randomly floating about in the 3d world!!
------------------------------------------------------------------------
r1173 | daquino | 2009-09-29 22:29:15 +0000 (Tue, 29 Sep 2009) | 1 line

cleaning up old code since these ports worked correctly.
------------------------------------------------------------------------
r1174 | daquino | 2009-09-30 00:34:05 +0000 (Wed, 30 Sep 2009) | 6 lines

Reinstated TloadReloadPlaceHolder() ...
Single player level picture now works.
Load save game picture now works.
Disabled SAVEGAME_SLOTS for it to properly load the save game info.  Flip this back later if desired.
Allowed loading of any save game file version, but threw in a warning, they will most likely crash.

------------------------------------------------------------------------
r1175 | daquino | 2009-09-30 01:48:04 +0000 (Wed, 30 Sep 2009) | 1 line

set transparency for screen polys.
------------------------------------------------------------------------
r1176 | daquino | 2009-09-30 22:05:53 +0000 (Wed, 30 Sep 2009) | 1 line

ported water loading to use index buffers.
------------------------------------------------------------------------
r1177 | daquino | 2009-09-30 23:05:30 +0000 (Wed, 30 Sep 2009) | 3 lines

LOAD_TPAGES_SYSMEM isn't used anymore as all textures are loaded the same way using FSCreateTexture during load-all-textures ....
FSCreateTexture uses d3d pool managed which will automatically transfer objects to video memory from system memory as needed.
This makes the data safe and removes need to require it, also removes the need for us to manually move things from system memory to video memory making allot of other code unnecessary...
------------------------------------------------------------------------
r1178 | daquino | 2009-09-30 23:10:42 +0000 (Wed, 30 Sep 2009) | 2 lines

Mainly committed fix for the color key which should use transparency for pixels where black(rgb=0)+alpha(255).
Added debug code that dumps the images so we can see if they have alpha fields for transparency.
------------------------------------------------------------------------
r1179 | daquino | 2009-10-01 02:16:35 +0000 (Thu, 01 Oct 2009) | 3 lines

Created an ExecuteLines to centralize line drawing.
Copied a vertex of the line so we could render as a triangle, good enough for now.

------------------------------------------------------------------------
r1180 | daquino | 2009-10-01 21:54:37 +0000 (Thu, 01 Oct 2009) | 2 lines

Duplicated the draw function for drawing line primitives.
Removed the triangle line hack.
------------------------------------------------------------------------
r1181 | daquino | 2009-10-01 21:54:51 +0000 (Thu, 01 Oct 2009) | 1 line

This should have been a float.
------------------------------------------------------------------------
r1182 | daquino | 2009-10-01 23:16:32 +0000 (Thu, 01 Oct 2009) | 1 line

there was no point in this indice data as it simply referenced the same list of vertexes in the same order...
------------------------------------------------------------------------
r1183 | daquino | 2009-10-03 15:06:19 +0000 (Sat, 03 Oct 2009) | 4 lines

All textures will be loaded in the same way now.
The managed pool will load textures as necessary to video memory.
So converted LOAD_TPAGES_VIDMEM and LOAD_TPAGES_SYSMEM to LOAD_TPAGES.
Deleted code that supported system texture loading...
------------------------------------------------------------------------
r1184 | daquino | 2009-10-03 15:06:33 +0000 (Sat, 03 Oct 2009) | 1 line

small compiler warning fix.
------------------------------------------------------------------------
r1185 | daquino | 2009-10-03 15:09:47 +0000 (Sat, 03 Oct 2009) | 1 line

got rid of the stupid windows 98 error warning.
------------------------------------------------------------------------
r1186 | daquino | 2009-10-03 16:56:40 +0000 (Sat, 03 Oct 2009) | 1 line

Added detection of first pixel in a texture being black again.
------------------------------------------------------------------------
r1187 | daquino | 2009-10-03 20:39:57 +0000 (Sat, 03 Oct 2009) | 1 line

renamed cull_ccw() to reset_cull() to be more self documenting.
------------------------------------------------------------------------
r1188 | daquino | 2009-10-03 20:45:43 +0000 (Sat, 03 Oct 2009) | 1 line

was pointless to have included that code since d3d9 isn't going to support color keys.
------------------------------------------------------------------------
r1189 | daquino | 2009-10-03 20:46:25 +0000 (Sat, 03 Oct 2009) | 1 line

that stuff is pointless too.
------------------------------------------------------------------------
r1190 | daquino | 2009-10-03 21:03:02 +0000 (Sat, 03 Oct 2009) | 2 lines

removed everything to do with color keys since it's not supported anymore.
removed some unused code portions.
------------------------------------------------------------------------
r1191 | daquino | 2009-10-03 22:15:47 +0000 (Sat, 03 Oct 2009) | 1 line

added wireframe mode commented out.
------------------------------------------------------------------------
r1192 | daquino | 2009-10-04 09:11:06 +0000 (Sun, 04 Oct 2009) | 4 lines

Disabled zbuffer writing in 2d polys so they don't obscure objects drawn after...
Enabled completely ignoring full alpha pixels to support a hackish version of opaque black color key by updating all the images to have alpha values instead.
Added normal transparency state to all the draw calls where appropriate.

------------------------------------------------------------------------
r1193 | daquino | 2009-10-04 10:02:11 +0000 (Sun, 04 Oct 2009) | 2 lines

enabled zbuffering in polys.c to stop objects from behind hidden.

------------------------------------------------------------------------
r1194 | daquino | 2009-10-04 10:02:24 +0000 (Sun, 04 Oct 2009) | 1 line

created helper function to save textures to a file.
------------------------------------------------------------------------
r1195 | daquino | 2009-10-05 02:14:56 +0000 (Mon, 05 Oct 2009) | 1 line

created states to replace the old special exec bufs..
------------------------------------------------------------------------
r1196 | daquino | 2009-10-05 02:22:50 +0000 (Mon, 05 Oct 2009) | 1 line

cleaned up and consolidated code.
------------------------------------------------------------------------
r1197 | daquino | 2009-10-05 05:03:46 +0000 (Mon, 05 Oct 2009) | 7 lines

migrated all the old special exe bufs to special render state function calls.
migrated all the zbuff and trans calls back to the new functions that replicate the old special exec bufs.
added back colour key support.
added support in drawing api for the colour key value to set alpha testing...
added a color key argument to fscreatetexture...
merged all the draw function into a single function.
the has got real black thing looks pretty broken though...
------------------------------------------------------------------------
r1198 | daquino | 2009-10-05 05:33:10 +0000 (Mon, 05 Oct 2009) | 2 lines

Added back these two missing lines to support colour keying.
Blocked the HasBmpGotRealBlack line for now cause it's broken when reading updated textures.
------------------------------------------------------------------------
r1199 | daquino | 2009-10-05 06:13:16 +0000 (Mon, 05 Oct 2009) | 2 lines

colour key should have been at least an int cause BOOL is such... 
this would break pointer assignments because (*x)=TRUE would take up more space than a uint16...
------------------------------------------------------------------------
r1200 | daquino | 2009-10-05 06:14:42 +0000 (Mon, 05 Oct 2009) | 2 lines

Added a nifty trick to detect if a file has alpha layer,
instead of using the hasrealblack trick...
------------------------------------------------------------------------
r1201 | daquino | 2009-10-07 03:03:40 +0000 (Wed, 07 Oct 2009) | 2 lines

fixed bug in rendering Water.
fixed bug introduced last commit by accident which rendered the texture missing.
------------------------------------------------------------------------
r1202 | daquino | 2009-10-07 04:11:17 +0000 (Wed, 07 Oct 2009) | 1 line

fixed the alpha func bug that was causing pixels to eat away at a distance.
------------------------------------------------------------------------
r1203 | daquino | 2009-10-07 04:41:10 +0000 (Wed, 07 Oct 2009) | 1 line

cleaning up unused branches
------------------------------------------------------------------------
r1204 | daquino | 2009-10-07 04:50:03 +0000 (Wed, 07 Oct 2009) | 1 line

renaming the branch
------------------------------------------------------------------------
r1205 | daquino | 2009-10-07 04:51:45 +0000 (Wed, 07 Oct 2009) | 1 line

renaming the old main branch to d3d6
------------------------------------------------------------------------
r1206 | daquino | 2009-10-07 04:52:42 +0000 (Wed, 07 Oct 2009) | 1 line

moving folders out of branches to reduce level of nesting
------------------------------------------------------------------------
r1207 | daquino | 2009-10-07 04:54:05 +0000 (Wed, 07 Oct 2009) | 1 line

removing the branch folder cause its annoying to have so nesting levels; moving d3d6 to its master folder
------------------------------------------------------------------------
r1208 | daquino | 2009-10-07 04:56:28 +0000 (Wed, 07 Oct 2009) | 4 lines

Copying stable skeleton to it's d3d6 folder.
We are going to start forking the skeleton folder for each branch.
Easier as well to keep everything centralized in a single tree.

------------------------------------------------------------------------
r1209 | daquino | 2009-10-07 04:59:15 +0000 (Wed, 07 Oct 2009) | 4 lines

Same as the last commit.
This copy is going to the d3d9 branch.
We are going to start updating all textures.

------------------------------------------------------------------------
r1210 | daquino | 2009-10-07 05:02:06 +0000 (Wed, 07 Oct 2009) | 1 line

removing the old skeleton folder
------------------------------------------------------------------------
r1211 | daquino | 2009-10-07 05:04:32 +0000 (Wed, 07 Oct 2009) | 1 line

should probably always be debugging
------------------------------------------------------------------------
r1212 | daquino | 2009-10-07 05:06:59 +0000 (Wed, 07 Oct 2009) | 1 line

made folder for bsp related tools
------------------------------------------------------------------------
r1213 | daquino | 2009-10-07 05:29:41 +0000 (Wed, 07 Oct 2009) | 1 line

notes updates
------------------------------------------------------------------------
r1214 | daquino | 2009-10-07 06:12:39 +0000 (Wed, 07 Oct 2009) | 1 line

Updated the ship texture with the window to have an alpha layer.
------------------------------------------------------------------------
r1215 | daquino | 2009-10-07 07:01:21 +0000 (Wed, 07 Oct 2009) | 1 line

Upgraded the textures to add an alpha layer for 3 bikers that have black pixels that require rendering as see through.
------------------------------------------------------------------------
r1216 | daquino | 2009-10-07 07:35:20 +0000 (Wed, 07 Oct 2009) | 1 line

Added an alpha layer to the secondary weapon texture.
------------------------------------------------------------------------
r1217 | daquino | 2009-10-07 07:56:16 +0000 (Wed, 07 Oct 2009) | 1 line

Added an alpha layer to the control room texture.
------------------------------------------------------------------------
r1218 | daquino | 2009-10-07 08:15:16 +0000 (Wed, 07 Oct 2009) | 3 lines

list of textures that need colour keying.
this will all need to be removed going forward.
some initial docs on rendering.
------------------------------------------------------------------------
r1219 | daquino | 2009-10-08 03:25:19 +0000 (Thu, 08 Oct 2009) | 3 lines

fixed setviewporterror function.
removed the temporary hack fix in displaybackground.
added proper error detection.
------------------------------------------------------------------------
r1220 | daquino | 2009-10-08 15:22:39 +0000 (Thu, 08 Oct 2009) | 1 line

Ported some code to use the new matrix api.
------------------------------------------------------------------------
r1221 | daquino | 2009-10-09 02:29:00 +0000 (Fri, 09 Oct 2009) | 1 line

Identity is completely pointless since we have "identity" and it's not used.
------------------------------------------------------------------------
r1222 | daquino | 2009-10-09 03:08:00 +0000 (Fri, 09 Oct 2009) | 1 line

Consolidated code.
------------------------------------------------------------------------
r1223 | daquino | 2009-10-09 03:56:51 +0000 (Fri, 09 Oct 2009) | 1 line

Looks like this should of been replaced.
------------------------------------------------------------------------
r1224 | daquino | 2009-10-09 04:18:35 +0000 (Fri, 09 Oct 2009) | 1 line

Temporary fix for FindVisible() bustage.
------------------------------------------------------------------------
r1225 | daquino | 2009-10-09 05:54:12 +0000 (Fri, 09 Oct 2009) | 1 line

Updated my notes.
------------------------------------------------------------------------
r1226 | daquino | 2009-10-09 05:59:00 +0000 (Fri, 09 Oct 2009) | 6 lines

Created MYD3DVIEWPORT9 to support ScaleX and ScaleY which were passed along to different areas in code to perform clipping calculations...
This fixed the visibility/clipping bug of things disappearing...
Tweaked things up so that the abstraction functions cast the structures before passing them to d3d9 making them look like a regular d3d9 viewport structure.
Added a bunch of missing function prototypes to the header file...
Reverted the temporary fix in visi.c...

------------------------------------------------------------------------
r1227 | daquino | 2009-10-10 07:12:08 +0000 (Sat, 10 Oct 2009) | 4 lines

Removed the temporary hack where i commented out the lighting.
Fixed the lighting crash bug.
RENDEROBJECT is like 600 times bigger than LEVELRENDEROBJECT
so the memset was completely toasting previously set data...
------------------------------------------------------------------------
r1228 | daquino | 2009-10-11 22:59:26 +0000 (Sun, 11 Oct 2009) | 1 line

Re-enabled some code that was commented out.
------------------------------------------------------------------------
r1229 | daquino | 2009-10-11 23:28:25 +0000 (Sun, 11 Oct 2009) | 1 line

Getting rid of unused things.
------------------------------------------------------------------------
r1230 | daquino | 2009-10-11 23:29:56 +0000 (Sun, 11 Oct 2009) | 1 line

just added some comments.
------------------------------------------------------------------------
r1231 | daquino | 2009-10-12 00:19:10 +0000 (Mon, 12 Oct 2009) | 5 lines

Removed everything to do with clearing the screen.  
We will always clear the target/z buffers now.
Removed the weird Z_TRICK since it was never used except for testing.
Added vbLocked to the create vertex functions to replace the memsets...
SetZProj was not used anymore either.
------------------------------------------------------------------------
r1232 | daquino | 2009-10-12 00:54:52 +0000 (Mon, 12 Oct 2009) | 1 line

Re-enabled the frame per second counter.
------------------------------------------------------------------------
r1233 | daquino | 2009-10-12 01:30:29 +0000 (Mon, 12 Oct 2009) | 3 lines

Removed the enhanced cross hair.
It's not even fully functional.
And it's not used for anything.
------------------------------------------------------------------------
r1234 | daquino | 2009-10-12 03:05:40 +0000 (Mon, 12 Oct 2009) | 4 lines

Removed everything to do with mip mapp mode selection (trilinear/bilinear).
The game will simply use ANISOTROPIC filtering from now on.
Fixed the broken poly text cross hair by using ANISOTROPIC filtering instead of disabling filtering when drawing in screenpolys.c.

------------------------------------------------------------------------
r1235 | daquino | 2009-10-12 05:13:03 +0000 (Mon, 12 Oct 2009) | 1 line

Massive house cleaning to remove unused d3d6 stuff...
------------------------------------------------------------------------
r1236 | daquino | 2009-10-12 05:24:39 +0000 (Mon, 12 Oct 2009) | 3 lines

Removed the hack to stop orbitals from showing up in debug mode.
Appears to not be needed anymore as the rendering doesn't slow down.
Orbitals seem to render fine in d3d9.
------------------------------------------------------------------------
r1237 | daquino | 2009-10-12 05:31:16 +0000 (Mon, 12 Oct 2009) | 6 lines

Deleted AutoDetail has to be the ugliest implementation ever.
First of all it was on by default making everything look pretty ugly.
d3d9 and modern cards can handle forsaken fine none of this is needed.
on top of that it would flip between various LOD's without need.
the methods left simply rely on distance to downgrade LOD.
avgframelag isn't needed anymore apparently and it was a horrible calculation anyway.
------------------------------------------------------------------------
r1238 | daquino | 2009-10-12 06:10:54 +0000 (Mon, 12 Oct 2009) | 1 line

function not needed unless that define is set
------------------------------------------------------------------------
r1239 | daquino | 2009-10-12 09:06:17 +0000 (Mon, 12 Oct 2009) | 5 lines

All blitting has been removed.
Polytext is now the default.
Subsequently the loading bar is gone (wasn't used anymore anyway).
Lots of code was cleaned up in the process.

------------------------------------------------------------------------
r1240 | daquino | 2009-10-12 09:38:14 +0000 (Mon, 12 Oct 2009) | 3 lines

Enabled more informative level loading info.
Updated PrintInitViewStatus() to have it's own render buff allowing it to display text in between diff render modes.
Still need to figure out why the text texture page is being reloaded causing the text placeholders to show up.
------------------------------------------------------------------------
r1241 | daquino | 2009-10-15 02:20:01 +0000 (Thu, 15 Oct 2009) | 1 line

removed FSLoadBitmap as forsaken doesnt use any more blits
------------------------------------------------------------------------
r1242 | daquino | 2009-10-15 04:38:10 +0000 (Thu, 15 Oct 2009) | 6 lines

Major house cleaning again.
Deleted allot of things that aren't used including mipmap.c and MipMap.h
Mipmaps are completely handled by FSCreateTexture now.
Documented lots of the init code in d3d_render.cpp
Consolidated various msg box type functions to a single Msg() function,
it now returns the value of ok/cancel always...
------------------------------------------------------------------------
r1243 | daquino | 2009-10-15 15:34:19 +0000 (Thu, 15 Oct 2009) | 4 lines

Major house cleaning again!
Cleaning, commenting, deleting of code.
Also created render_error_description() to return a string describing the d3d error for an HRESULT.
Also ported back to direct input 7 to hopefully fix the joystick bug...
------------------------------------------------------------------------
r1244 | daquino | 2009-10-15 17:40:32 +0000 (Thu, 15 Oct 2009) | 4 lines

More house cleaning.
Deleted unused fonts.
Uncommented some code that shouldn't have been hidden.
Created render_initialized variable.
------------------------------------------------------------------------
r1245 | daquino | 2009-10-20 03:05:11 +0000 (Tue, 20 Oct 2009) | 3 lines

More house cleaning.
Most of that code was unused or out dated.
The lost surface stuff isn't needed anymore.
------------------------------------------------------------------------
r1246 | daquino | 2009-10-20 03:14:21 +0000 (Tue, 20 Oct 2009) | 1 line

Some unused function.
------------------------------------------------------------------------
r1247 | daquino | 2009-10-20 04:25:08 +0000 (Tue, 20 Oct 2009) | 1 line

deleted unused file.
------------------------------------------------------------------------
r1248 | daquino | 2009-10-20 04:47:24 +0000 (Tue, 20 Oct 2009) | 5 lines

More house cleaning.
Moved the magic.h file into main.h and deleted magic.h
Deleted mostly everything to do with org_vertpnt.
All active code that uses org_vertpnt was converted to new format.
This fixed the scan lines bug.
------------------------------------------------------------------------
r1249 | daquino | 2009-10-20 04:52:39 +0000 (Tue, 20 Oct 2009) | 1 line

Deleted completely unused file.
------------------------------------------------------------------------
r1250 | daquino | 2009-10-20 05:43:32 +0000 (Tue, 20 Oct 2009) | 4 lines

More house cleaning.
Deleted stuff.
Fixed up the compiler warnings for the reload texture function.
Still isn't reloading them though.
------------------------------------------------------------------------
r1251 | daquino | 2009-10-20 07:00:43 +0000 (Tue, 20 Oct 2009) | 2 lines

Fixed the reload/update texture bug.
This fixes updating the tv dummy or player textures etc...
------------------------------------------------------------------------
r1252 | daquino | 2009-10-20 07:37:22 +0000 (Tue, 20 Oct 2009) | 2 lines

Fixed regression bug that broke level pic.
Made create_texture_from_file/TloadReloadPlaceHolder function also able to create a texture not just update.
------------------------------------------------------------------------
r1253 | daquino | 2009-10-21 02:02:00 +0000 (Wed, 21 Oct 2009) | 1 line

removed TloadReloadTextureSurf() since it's not used.
------------------------------------------------------------------------
r1254 | daquino | 2009-10-21 02:54:55 +0000 (Wed, 21 Oct 2009) | 2 lines

deleted everything to do with polysort.c/h
wasn't used anymore...
------------------------------------------------------------------------
r1255 | daquino | 2009-10-21 03:31:59 +0000 (Wed, 21 Oct 2009) | 3 lines

converted everything to use the single d3dappi structure instead of the pointer to d3dapp.
moved some things out of d3dappi that shouldn't be global.
created render_cleanup() to hide some things.
------------------------------------------------------------------------
r1256 | daquino | 2009-10-21 03:37:58 +0000 (Wed, 21 Oct 2009) | 1 line

Should have been in last commit.
------------------------------------------------------------------------
r1257 | daquino | 2009-10-21 03:49:41 +0000 (Wed, 21 Oct 2009) | 1 line

Deleted some unused globals.
------------------------------------------------------------------------
r1258 | daquino | 2009-10-21 04:29:32 +0000 (Wed, 21 Oct 2009) | 4 lines

hid some variables out of d3dappi into d3d_render.cpp.
deleted all the unused passing around of the viewport.
cleaned up lost of commented out code that won't be used again.
general code cleaning.
------------------------------------------------------------------------
r1259 | daquino | 2009-10-21 04:57:38 +0000 (Wed, 21 Oct 2009) | 1 line

Switched to dynamic buffers for dynamic objects.
------------------------------------------------------------------------
r1260 | daquino | 2009-10-21 05:08:47 +0000 (Wed, 21 Oct 2009) | 2 lines

if you driver doesn't do textures, zbuffer, or the window's depth...
then buy a new video card... 
------------------------------------------------------------------------
r1261 | daquino | 2009-10-21 05:10:06 +0000 (Wed, 21 Oct 2009) | 1 line

color key trans isn't used anymore in driver.
------------------------------------------------------------------------
r1262 | daquino | 2009-10-21 05:38:20 +0000 (Wed, 21 Oct 2009) | 3 lines

if your driver can't do textures than get a new video card.
documented the render state and hardware capability detection code.
cleaned up some unused code.
------------------------------------------------------------------------
r1263 | daquino | 2009-10-21 06:02:31 +0000 (Wed, 21 Oct 2009) | 1 line

set lock mode to discard to make rendering faster.
------------------------------------------------------------------------
r1264 | daquino | 2009-10-22 03:27:54 +0000 (Thu, 22 Oct 2009) | 1 line

should have been deleted before.
------------------------------------------------------------------------
r1265 | daquino | 2009-10-22 03:55:11 +0000 (Thu, 22 Oct 2009) | 1 line

Lowered the fps interval to quickly update.
------------------------------------------------------------------------
r1266 | daquino | 2009-10-22 03:55:41 +0000 (Thu, 22 Oct 2009) | 1 line

This appears to be the proper no-vsync mode giving me about 90 fps , 20 more than before...
------------------------------------------------------------------------
r1267 | daquino | 2009-10-22 05:29:39 +0000 (Thu, 22 Oct 2009) | 1 line

added some other modes in preparation for supporting 16/24 bit modes...
------------------------------------------------------------------------
r1268 | daquino | 2009-10-22 14:16:59 +0000 (Thu, 22 Oct 2009) | 2 lines

Added some debugging to device creation failure.
Trying to get 16 bit back buffer to work for older cards...
------------------------------------------------------------------------
r1269 | daquino | 2009-10-23 04:46:00 +0000 (Fri, 23 Oct 2009) | 1 line

put back 32 bit mode.
------------------------------------------------------------------------
r1270 | daquino | 2009-10-23 06:00:20 +0000 (Fri, 23 Oct 2009) | 1 line

all cards should be able to cull for now.
------------------------------------------------------------------------
r1271 | daquino | 2009-10-23 06:04:23 +0000 (Fri, 23 Oct 2009) | 1 line

cheap cleaning.
------------------------------------------------------------------------
r1272 | daquino | 2009-10-23 06:20:50 +0000 (Fri, 23 Oct 2009) | 1 line

Deleted unused variables.
------------------------------------------------------------------------
r1273 | daquino | 2009-10-23 06:21:06 +0000 (Fri, 23 Oct 2009) | 1 line

Some notes for later.
------------------------------------------------------------------------
r1274 | daquino | 2009-10-23 07:17:14 +0000 (Fri, 23 Oct 2009) | 6 lines

fixed screen color bug by creating a generate init/defaults/cleanup whatever you want to call it function for a screen poly.
this way all settings are defaulted when a poly is added back into the pool.
previously DoDamage() was calling MakeScreenFlash() which modified values that nothing else would reset...
Hence each time DoDamage() was called you'd pollute another poly with fullscreen settings...
Causing whatever uses that poly to stretch across the entire screen...
This fixes the screen turning to a color bug....
------------------------------------------------------------------------
r1275 | daquino | 2009-10-23 07:29:09 +0000 (Fri, 23 Oct 2009) | 2 lines

hid CanCullFlag behind the api.
deleted un-needed comments.
------------------------------------------------------------------------
r1276 | daquino | 2009-10-23 07:37:40 +0000 (Fri, 23 Oct 2009) | 1 line

Deleted un-needed code and tweaked some default settings.
------------------------------------------------------------------------
r1277 | daquino | 2009-10-23 08:15:26 +0000 (Fri, 23 Oct 2009) | 1 line

fixed the lazer/trojax bar bug
------------------------------------------------------------------------
r1278 | daquino | 2009-10-23 08:15:40 +0000 (Fri, 23 Oct 2009) | 1 line

doesn't seem to cause any issue anymore.
------------------------------------------------------------------------
r1279 | daquino | 2009-10-23 08:21:38 +0000 (Fri, 23 Oct 2009) | 1 line

added notes about changing device mode not being supported yet.
------------------------------------------------------------------------
r1280 | daquino | 2009-10-23 08:30:26 +0000 (Fri, 23 Oct 2009) | 1 line

enabled the vsync cli option.
------------------------------------------------------------------------
r1281 | daquino | 2009-10-23 08:31:32 +0000 (Fri, 23 Oct 2009) | 1 line

not used anymore.
------------------------------------------------------------------------
r1282 | daquino | 2009-10-23 08:52:16 +0000 (Fri, 23 Oct 2009) | 7 lines

deleted various unused globals.
moved around some other globals related to command line arguments.
tweaked up defaults for command line arguments.
made mipmap enabled permanently...
all command line arguments work properly now except for bpp.
so width/height can be specified by using -mode:w:h
fullscreen and resolution settings will save properly to the config file.
------------------------------------------------------------------------
r1283 | daquino | 2009-10-24 04:06:00 +0000 (Sat, 24 Oct 2009) | 1 line

Unused function.
------------------------------------------------------------------------
r1284 | daquino | 2009-10-24 04:06:19 +0000 (Sat, 24 Oct 2009) | 1 line

unused.
------------------------------------------------------------------------
r1285 | daquino | 2009-10-24 04:06:57 +0000 (Sat, 24 Oct 2009) | 1 line

code not used by anything.
------------------------------------------------------------------------
r1286 | daquino | 2009-10-24 04:07:21 +0000 (Sat, 24 Oct 2009) | 1 line

not used by anything.
------------------------------------------------------------------------
r1287 | daquino | 2009-10-24 04:21:05 +0000 (Sat, 24 Oct 2009) | 1 line

disabled change background color for now.
------------------------------------------------------------------------
r1288 | daquino | 2009-10-24 04:21:53 +0000 (Sat, 24 Oct 2009) | 1 line

will eventually detect if square textures are required.
------------------------------------------------------------------------
r1289 | daquino | 2009-10-24 04:37:50 +0000 (Sat, 24 Oct 2009) | 4 lines

Official report here... The CanCullFlag=FALSE is what cause the trojax bug.
None the less cull flags are not even part of d3d caps.
they are always supported.
Removed the RENDER_USING_FACES thing too...
------------------------------------------------------------------------
r1290 | daquino | 2009-10-24 04:44:35 +0000 (Sat, 24 Oct 2009) | 3 lines

got rid of the stippled alpha stuff...
game would fall back to stipple mode if Goraud shading was not supported.

------------------------------------------------------------------------
r1291 | daquino | 2009-10-24 04:52:08 +0000 (Sat, 24 Oct 2009) | 1 line

software and stipple mode are not needed anymore.
------------------------------------------------------------------------
r1292 | daquino | 2009-10-24 04:52:33 +0000 (Sat, 24 Oct 2009) | 1 line

tiny bug.
------------------------------------------------------------------------
r1293 | daquino | 2009-10-24 05:01:55 +0000 (Sat, 24 Oct 2009) | 1 line

stupid bug again.
------------------------------------------------------------------------
r1294 | daquino | 2009-10-24 05:02:14 +0000 (Sat, 24 Oct 2009) | 1 line

cleaned up the trans function.
------------------------------------------------------------------------
r1295 | daquino | 2009-10-24 05:27:08 +0000 (Sat, 24 Oct 2009) | 2 lines

i believe actual_trans never desired zbuffer write.

------------------------------------------------------------------------
r1296 | daquino | 2009-10-24 05:52:46 +0000 (Sat, 24 Oct 2009) | 1 line

bunch of unused variables.
------------------------------------------------------------------------
r1297 | daquino | 2009-10-24 06:06:07 +0000 (Sat, 24 Oct 2009) | 1 line

unused stuff.
------------------------------------------------------------------------
r1298 | daquino | 2009-10-25 05:44:11 +0000 (Sun, 25 Oct 2009) | 3 lines

cleaned up initialization code.
detects which back buffer format is supported.
enumerates modes and picks the best/preferred one.
------------------------------------------------------------------------
r1299 | daquino | 2009-10-25 05:52:24 +0000 (Sun, 25 Oct 2009) | 1 line

Updated all OutputDebugString's to DebugPrintf
------------------------------------------------------------------------
r1300 | daquino | 2009-10-25 06:53:08 +0000 (Sun, 25 Oct 2009) | 9 lines

moved some globals to be passed directly to init_renderer.
redefined the name of some types.
stores display modes in d3dappi.Modes[]'s now...
listing of display modes in game works.
created my own display mode struct.
moved default_(width|height|bpp) to be default_mode struct...
moved some code out of init_renderer that shouldn't be in there.
deleted some unused variables.
maintaining some more fields in d3dappi...
------------------------------------------------------------------------
r1301 | daquino | 2009-10-25 07:10:31 +0000 (Sun, 25 Oct 2009) | 1 line

added support for the refresh rate in display modes.
------------------------------------------------------------------------
r1302 | daquino | 2009-10-25 08:11:15 +0000 (Sun, 25 Oct 2009) | 3 lines

cleaned up some unused stuff.
added proper selection/saving of last screen mode based on rate
RenderModeSelect and render_mode_select will change to a new display modes including switching between window/fullscreen.
------------------------------------------------------------------------
r1303 | daquino | 2009-10-25 08:31:30 +0000 (Sun, 25 Oct 2009) | 1 line

realized that piece of code isn't an issue.
------------------------------------------------------------------------
r1304 | daquino | 2009-10-25 08:32:17 +0000 (Sun, 25 Oct 2009) | 1 line

just cleaning up stuff.
------------------------------------------------------------------------
r1305 | daquino | 2009-10-25 08:39:11 +0000 (Sun, 25 Oct 2009) | 1 line

no blits are supported anymore.
------------------------------------------------------------------------
r1306 | daquino | 2009-10-25 19:04:48 +0000 (Sun, 25 Oct 2009) | 5 lines

deleted d3dapp.c/h ...
moved some code to d3dmain.cpp and d3dappi.h ...



------------------------------------------------------------------------
r1307 | daquino | 2009-10-25 19:15:22 +0000 (Sun, 25 Oct 2009) | 1 line

enabled dithering 16 bit mode to make it look nice.
------------------------------------------------------------------------
r1308 | daquino | 2009-10-25 20:40:33 +0000 (Sun, 25 Oct 2009) | 2 lines

cleaning up unused texture files.
cleaned up some of the title font initialization code.
------------------------------------------------------------------------
r1309 | daquino | 2009-10-25 21:35:59 +0000 (Sun, 25 Oct 2009) | 1 line

lines are supposed to be opaque needed to move them after the change back to normal states.
------------------------------------------------------------------------
r1310 | daquino | 2009-10-25 23:38:05 +0000 (Sun, 25 Oct 2009) | 5 lines

removed need for ModeCase.
lots of the code that used ModeCase was not used anymore, deleted all of it.
the font enumerated values were never used they were meant to be generated by screen size.
we only have need for fonts larger than the 512 so we are down to one font file...
tweaked the fonts to use medium size for small since they were to hard to see...
------------------------------------------------------------------------
r1311 | daquino | 2009-10-25 23:42:28 +0000 (Sun, 25 Oct 2009) | 1 line

error in defines caused window messages to not be handled at all..
------------------------------------------------------------------------
r1312 | daquino | 2009-10-26 00:02:28 +0000 (Mon, 26 Oct 2009) | 1 line

fixed size of box to fit the huge fonts...
------------------------------------------------------------------------
r1313 | daquino | 2009-10-26 02:10:29 +0000 (Mon, 26 Oct 2009) | 1 line

window should have a parent.
------------------------------------------------------------------------
r1314 | daquino | 2009-10-26 02:11:22 +0000 (Mon, 26 Oct 2009) | 2 lines

gamma value is not being used at all.
appears to be some kind of index based color tricks too...
------------------------------------------------------------------------
r1315 | daquino | 2009-10-26 05:24:24 +0000 (Mon, 26 Oct 2009) | 6 lines

added the gamma table back.
figured out how to apply the gamma.
the gamma table is used to alter the rgb value's of loaded textures.
when gamma is changed all textures are reloaded applying the new values.
we could probably just get away with altering existing loaded textures though later...
as it stands this change will break the reload texture function because the source textures are not in the default pool anymore.
------------------------------------------------------------------------
r1316 | daquino | 2009-10-26 06:22:17 +0000 (Mon, 26 Oct 2009) | 2 lines

added some debugging routines and information.
added some more details to the gamma function.
------------------------------------------------------------------------
r1317 | daquino | 2009-10-26 06:59:50 +0000 (Mon, 26 Oct 2009) | 2 lines

created copy_texture_bits to replace the UpdateTexture method so textures can be left in the d3d managed pool where they belong.

------------------------------------------------------------------------
r1318 | daquino | 2009-10-26 07:13:58 +0000 (Mon, 26 Oct 2009) | 3 lines

centralized on the single Msg() box function...
cured my worries about people ending up with what looks like a frozen window because of a message box not being brought to the foreground.
the solution i used was to switch to window mode then back to fullscreen.
------------------------------------------------------------------------
r1319 | daquino | 2009-10-26 07:27:02 +0000 (Mon, 26 Oct 2009) | 3 lines

reverted back to support small font size ...
I CANT STAND THE HUGE FONTSSSSS
removed a bunch of TODO notes that are now resolved.
------------------------------------------------------------------------
r1320 | daquino | 2009-10-26 07:53:20 +0000 (Mon, 26 Oct 2009) | 3 lines

fixed up the visual detail menu to have a better order.
enumerated display modes in the proper order and added HZ to each line.
removed listing of display modes under 640x480.
------------------------------------------------------------------------
r1321 | daquino | 2009-10-27 04:18:19 +0000 (Tue, 27 Oct 2009) | 2 lines

Fixed a small NULL pointer bug.
People can now join using -quickjoin -tcp
------------------------------------------------------------------------
r1322 | daquino | 2009-10-27 04:37:17 +0000 (Tue, 27 Oct 2009) | 1 line

added building of debug symbols.
------------------------------------------------------------------------
r1323 | daquino | 2009-10-27 05:34:54 +0000 (Tue, 27 Oct 2009) | 6 lines

tried to create safer values for resolution.
as stands older cards and on board cards are not all going to be happy at 800x600 in 16/32 bit modes...
640x480 @ 60 is the best for both...
defaulting to the lowest possible one is safe too I imagine...
cleaned up the command line parsing code and added support for -rate:x which allows setting the horizontal refresh rate for the mode...

------------------------------------------------------------------------
r1324 | daquino | 2009-10-27 05:52:41 +0000 (Tue, 27 Oct 2009) | 3 lines

updating some comments in the code.
texture surface data is accessible backwards.
hence all of our pixels are packed in bgra patterns
------------------------------------------------------------------------
r1325 | daquino | 2009-10-27 06:26:25 +0000 (Tue, 27 Oct 2009) | 1 line

got rid of ability to turn off lens flair...
------------------------------------------------------------------------
r1326 | daquino | 2009-10-27 06:38:08 +0000 (Tue, 27 Oct 2009) | 1 line

got rid of ability to lower smoke detail...
------------------------------------------------------------------------
r1327 | daquino | 2009-10-27 06:43:15 +0000 (Tue, 27 Oct 2009) | 1 line

got rid of ability to disable gore guts...
------------------------------------------------------------------------
r1328 | daquino | 2009-10-27 07:02:11 +0000 (Tue, 27 Oct 2009) | 1 line

got rid of ability to lower light details and completely removed software mono chrome light mode...
------------------------------------------------------------------------
r1329 | daquino | 2009-10-27 08:32:29 +0000 (Tue, 27 Oct 2009) | 1 line

removed the bike detail hack.
------------------------------------------------------------------------
r1330 | daquino | 2009-10-29 04:25:25 +0000 (Thu, 29 Oct 2009) | 5 lines

renamed various things to better names.
converted various functions to receive a pointer to render_info instead of raw arguments.
detect and recover from device lost when user activates the window.
hid some items behind render_info_t.

------------------------------------------------------------------------
r1331 | daquino | 2009-10-29 05:39:26 +0000 (Thu, 29 Oct 2009) | 1 line

moved everything out of myglobs ... 
------------------------------------------------------------------------
r1332 | daquino | 2009-10-29 07:48:48 +0000 (Thu, 29 Oct 2009) | 2 lines

deleted the old d3dmain.h/cpp and created main.c main_.cpp breakpad.cpp...
moved lots of stuff around and generally cleaned everything up...
------------------------------------------------------------------------
r1333 | daquino | 2009-10-29 08:10:27 +0000 (Thu, 29 Oct 2009) | 1 line

fixed not being able to change resolutions.
------------------------------------------------------------------------
r1334 | daquino | 2009-10-30 03:05:01 +0000 (Fri, 30 Oct 2009) | 1 line

cleaned up d3dappi.h contents allot and deleted unused objects.
------------------------------------------------------------------------
r1335 | daquino | 2009-10-30 03:13:56 +0000 (Fri, 30 Oct 2009) | 1 line

renamed d3dappi.h to render.h.
------------------------------------------------------------------------
r1336 | daquino | 2009-10-30 03:20:40 +0000 (Fri, 30 Oct 2009) | 1 line

updating files to nameing convention
------------------------------------------------------------------------
r1337 | daquino | 2009-10-30 03:27:36 +0000 (Fri, 30 Oct 2009) | 1 line

moved a function out of oct2.c into sfx.c
------------------------------------------------------------------------
r1338 | daquino | 2009-10-30 03:56:02 +0000 (Fri, 30 Oct 2009) | 1 line

separated functions from oct2.c to create a new input.h and input_dinput.c files...
------------------------------------------------------------------------
r1339 | daquino | 2009-10-30 04:24:37 +0000 (Fri, 30 Oct 2009) | 3 lines

got rid of org_vertpnt cause it's not needed anymore.
added some notes to the code for documentation.
fixed some random bugs from the last commits.
------------------------------------------------------------------------
r1340 | daquino | 2009-10-30 04:34:10 +0000 (Fri, 30 Oct 2009) | 1 line

hid gamma stuff behind the api.
------------------------------------------------------------------------
r1341 | daquino | 2009-10-30 04:43:33 +0000 (Fri, 30 Oct 2009) | 2 lines

Got rid of the nude girls cheat.
People can just overwrite the textures if they want.
------------------------------------------------------------------------
r1342 | daquino | 2009-10-30 04:49:28 +0000 (Fri, 30 Oct 2009) | 2 lines

file should have been commited last time...
also fixed a stupid bug.
------------------------------------------------------------------------
r1343 | daquino | 2009-10-30 15:31:41 +0000 (Fri, 30 Oct 2009) | 1 line

Trying to add support for loading png's...
------------------------------------------------------------------------
r1344 | daquino | 2009-10-30 15:32:06 +0000 (Fri, 30 Oct 2009) | 1 line

this is like the 3rd time I've committed this change. wtf...
------------------------------------------------------------------------
r1345 | daquino | 2009-10-31 04:51:40 +0000 (Sat, 31 Oct 2009) | 1 line

cleaned up a potential memory leak.
------------------------------------------------------------------------
r1346 | daquino | 2009-10-31 04:54:23 +0000 (Sat, 31 Oct 2009) | 1 line

got rid of annoying node load errors...
------------------------------------------------------------------------
r1347 | daquino | 2009-10-31 06:12:36 +0000 (Sat, 31 Oct 2009) | 3 lines

Deleted TloadGetStats() as FSCreateTexture() now accepts pointers for width/height and returns the values.
Made FSCreateTexture() dynamically attempt to find .png first then fall back to .bmp until i update all the textures...

------------------------------------------------------------------------
r1348 | daquino | 2009-10-31 08:03:16 +0000 (Sat, 31 Oct 2009) | 1 line

Converted a bunch of textures to png.
------------------------------------------------------------------------
r1349 | daquino | 2009-10-31 08:32:54 +0000 (Sat, 31 Oct 2009) | 1 line

updated all level textures to png
------------------------------------------------------------------------
r1350 | daquino | 2009-10-31 09:08:44 +0000 (Sat, 31 Oct 2009) | 1 line

converted a bunch of files to have an alpha channel for transparent black.
------------------------------------------------------------------------
r1351 | daquino | 2009-10-31 10:13:52 +0000 (Sat, 31 Oct 2009) | 1 line

level specific textures only exists in data/levels/*/textures
------------------------------------------------------------------------
r1352 | daquino | 2009-10-31 10:20:20 +0000 (Sat, 31 Oct 2009) | 1 line

pikupsa*.png is hard coded to forward to data\textures\titana.png
------------------------------------------------------------------------
r1353 | daquino | 2009-10-31 10:21:11 +0000 (Sat, 31 Oct 2009) | 1 line

titana.png is hard coded to forward to data\textures\titana.png
------------------------------------------------------------------------
r1354 | daquino | 2009-10-31 11:10:08 +0000 (Sat, 31 Oct 2009) | 7 lines

created GetLevelTexturePath() which 
// Allows consolodating commonly used texture files
// use texture in level folder as the ultimate source
// if it doesn't exist then look for it in data/textures
// or fall back to default.png
// also pkupsa?.bmp is hard coded to map to titana.png as the old game did
// size of destination should always be 256, path should end up at least 256-1
------------------------------------------------------------------------
r1355 | daquino | 2009-10-31 11:35:14 +0000 (Sat, 31 Oct 2009) | 1 line

nothing uses that file
------------------------------------------------------------------------
r1356 | daquino | 2009-10-31 11:43:17 +0000 (Sat, 31 Oct 2009) | 1 line

consolidated the following files into data/textures/
------------------------------------------------------------------------
r1357 | daquino | 2009-10-31 11:50:47 +0000 (Sat, 31 Oct 2009) | 1 line

consolidated the following files into data/textures/
------------------------------------------------------------------------
r1358 | daquino | 2009-10-31 19:42:57 +0000 (Sat, 31 Oct 2009) | 1 line

consolodated the acclaim texture.
------------------------------------------------------------------------
r1359 | daquino | 2009-10-31 19:44:22 +0000 (Sat, 31 Oct 2009) | 1 line

moved probeworld texture to shared folder for reuse
------------------------------------------------------------------------
r1360 | daquino | 2009-10-31 19:48:13 +0000 (Sat, 31 Oct 2009) | 1 line

consolodating ADSHERMC.png
------------------------------------------------------------------------
r1361 | daquino | 2009-10-31 19:51:09 +0000 (Sat, 31 Oct 2009) | 1 line

consolidating adstherma.png
------------------------------------------------------------------------
r1362 | daquino | 2009-10-31 20:05:48 +0000 (Sat, 31 Oct 2009) | 1 line

consolidating textures
------------------------------------------------------------------------
r1363 | daquino | 2009-10-31 20:32:21 +0000 (Sat, 31 Oct 2009) | 1 line

consolidated more textures
------------------------------------------------------------------------
r1364 | daquino | 2009-10-31 20:35:42 +0000 (Sat, 31 Oct 2009) | 1 line

unused texture
------------------------------------------------------------------------
r1365 | daquino | 2009-10-31 21:00:43 +0000 (Sat, 31 Oct 2009) | 1 line

consolodating images
------------------------------------------------------------------------
r1366 | daquino | 2009-10-31 21:20:00 +0000 (Sat, 31 Oct 2009) | 1 line

fixed the ship texture to support see through and put back the lighter one.
------------------------------------------------------------------------
r1367 | daquino | 2009-10-31 23:04:40 +0000 (Sat, 31 Oct 2009) | 1 line

renaming directories
------------------------------------------------------------------------
r1368 | daquino | 2009-10-31 23:05:19 +0000 (Sat, 31 Oct 2009) | 1 line

renaming directories
------------------------------------------------------------------------
r1369 | daquino | 2009-10-31 23:09:23 +0000 (Sat, 31 Oct 2009) | 1 line

renamed all files to be lower case
------------------------------------------------------------------------
r1370 | daquino | 2009-10-31 23:22:00 +0000 (Sat, 31 Oct 2009) | 1 line

fixing some paths to lower case in .vcproj
------------------------------------------------------------------------
r1371 | daquino | 2009-10-31 23:37:47 +0000 (Sat, 31 Oct 2009) | 1 line

fixed include names to be all lower case
------------------------------------------------------------------------
r1372 | daquino | 2009-10-31 23:40:35 +0000 (Sat, 31 Oct 2009) | 1 line

lowering all file names in vcproj
------------------------------------------------------------------------
r1373 | daquino | 2009-10-31 23:47:50 +0000 (Sat, 31 Oct 2009) | 1 line

lower cased code filenames in vcproj
------------------------------------------------------------------------
r1374 | daquino | 2009-11-01 00:01:44 +0000 (Sun, 01 Nov 2009) | 1 line

fixing case of an include
------------------------------------------------------------------------
r1375 | daquino | 2009-11-01 00:07:15 +0000 (Sun, 01 Nov 2009) | 1 line

fixed _inline to be __inline which is more gcc friendly.
------------------------------------------------------------------------
r1376 | daquino | 2009-11-01 00:45:43 +0000 (Sun, 01 Nov 2009) | 2 lines

stupid fix in cpp file.
dsp file appears to not be needed anymore.
------------------------------------------------------------------------
r1377 | daquino | 2009-11-01 00:54:25 +0000 (Sun, 01 Nov 2009) | 1 line

not needed anymore.
------------------------------------------------------------------------
r1378 | daquino | 2009-11-01 00:58:10 +0000 (Sun, 01 Nov 2009) | 1 line

this should only be local from now on...
------------------------------------------------------------------------
r1379 | daquino | 2009-11-01 00:59:10 +0000 (Sun, 01 Nov 2009) | 1 line

ignoring sln files.
------------------------------------------------------------------------
r1380 | daquino | 2009-11-01 01:17:24 +0000 (Sun, 01 Nov 2009) | 1 line

fixed preprocessor defs to use ; instead of ,
------------------------------------------------------------------------
r1381 | daquino | 2009-11-01 01:23:56 +0000 (Sun, 01 Nov 2009) | 1 line

removed unused function.
------------------------------------------------------------------------
r1382 | daquino | 2009-11-01 01:26:02 +0000 (Sun, 01 Nov 2009) | 1 line

fixed a winegcc name conflict.
------------------------------------------------------------------------
r1383 | daquino | 2009-11-01 01:33:14 +0000 (Sun, 01 Nov 2009) | 1 line

updated property of code files to use line ending format of the native system
------------------------------------------------------------------------
r1384 | daquino | 2009-11-01 01:34:29 +0000 (Sun, 01 Nov 2009) | 1 line

info on how to add new files
------------------------------------------------------------------------
r1385 | daquino | 2009-11-01 02:07:59 +0000 (Sun, 01 Nov 2009) | 1 line

turned off building breakpad in winegcc.
------------------------------------------------------------------------
r1386 | daquino | 2009-11-01 02:48:39 +0000 (Sun, 01 Nov 2009) | 3 lines

AccellDecell was a duplicate function.
Lion fixed up some struct definitions that required changing of how the header files were included.
various fixes to build in winegcc...
------------------------------------------------------------------------
r1387 | daquino | 2009-11-01 03:16:59 +0000 (Sun, 01 Nov 2009) | 1 line

lower casing header includes
------------------------------------------------------------------------
r1388 | daquino | 2009-11-01 07:49:05 +0000 (Sun, 01 Nov 2009) | 1 line

fixed bug in code that caused issues on changing resolutions.
------------------------------------------------------------------------
r1389 | daquino | 2009-11-01 19:52:26 +0000 (Sun, 01 Nov 2009) | 1 line

removed the need for main_.cpp
------------------------------------------------------------------------
r1390 | daquino | 2009-11-01 20:25:58 +0000 (Sun, 01 Nov 2009) | 1 line

some more winegcc fixes.
------------------------------------------------------------------------
r1391 | daquino | 2009-11-01 21:54:09 +0000 (Sun, 01 Nov 2009) | 1 line

just moved some code around.
------------------------------------------------------------------------
r1392 | daquino | 2009-11-01 21:57:31 +0000 (Sun, 01 Nov 2009) | 1 line

typedef's that weren't named.
------------------------------------------------------------------------
r1393 | daquino | 2009-11-01 22:05:08 +0000 (Sun, 01 Nov 2009) | 1 line

#else should not accept such things.
------------------------------------------------------------------------
r1394 | daquino | 2009-11-01 22:19:47 +0000 (Sun, 01 Nov 2009) | 1 line

improper definition.
------------------------------------------------------------------------
r1395 | daquino | 2009-11-01 22:25:46 +0000 (Sun, 01 Nov 2009) | 1 line

fixing winegcc warning.
------------------------------------------------------------------------
r1396 | daquino | 2009-11-01 22:30:38 +0000 (Sun, 01 Nov 2009) | 1 line

more winegcc warnings.
------------------------------------------------------------------------
r1397 | daquino | 2009-11-01 22:35:32 +0000 (Sun, 01 Nov 2009) | 1 line

more winegcc warnings.
------------------------------------------------------------------------
r1398 | daquino | 2009-11-01 22:41:29 +0000 (Sun, 01 Nov 2009) | 1 line

more winegcc warnings.
------------------------------------------------------------------------
r1399 | daquino | 2009-11-01 22:43:18 +0000 (Sun, 01 Nov 2009) | 1 line

more winegcc warnings.
------------------------------------------------------------------------
r1400 | daquino | 2009-11-01 22:45:10 +0000 (Sun, 01 Nov 2009) | 1 line

more winegcc warnings.
------------------------------------------------------------------------
r1401 | daquino | 2009-11-01 23:04:59 +0000 (Sun, 01 Nov 2009) | 1 line

more winegcc warnings.
------------------------------------------------------------------------
r1402 | daquino | 2009-11-01 23:55:42 +0000 (Sun, 01 Nov 2009) | 1 line

fixed annoying messages.
------------------------------------------------------------------------
r1403 | daquino | 2009-11-02 05:56:59 +0000 (Mon, 02 Nov 2009) | 4 lines

Blocked off calls to d3d9x functions from __WINE__ cause they are not implemented.
Ported away from d3d9x texture loading function by using devil/openil texture library.
For now I have the dll's added here but I will rebuild the .lib files statically later.
It may be better to simply use a straight up png only capable reader/writer util if one exists...
------------------------------------------------------------------------
r1404 | daquino | 2009-11-02 07:24:46 +0000 (Mon, 02 Nov 2009) | 1 line

hid some of the initial messages during level loading to get rid of ugly untextured text.
------------------------------------------------------------------------
r1405 | daquino | 2009-11-04 08:29:04 +0000 (Wed, 04 Nov 2009) | 1 line

after a torture path I finally got ilu/ilut static builds configured.
------------------------------------------------------------------------
r1406 | daquino | 2009-11-05 06:51:44 +0000 (Thu, 05 Nov 2009) | 1 line

forgot to add il.lib ...
------------------------------------------------------------------------
r1407 | daquino | 2009-11-05 06:57:13 +0000 (Thu, 05 Nov 2009) | 4 lines

Added custom png reader routine.
Devil was a bit to much.
Compiling on winegcc and the likes was a massive pain...
Moved libpng and libzlib into their own folders...
------------------------------------------------------------------------
r1408 | daquino | 2009-11-05 08:08:00 +0000 (Thu, 05 Nov 2009) | 1 line

small tweak to save an unneeded state change message.
------------------------------------------------------------------------
r1409 | daquino | 2009-11-05 08:08:34 +0000 (Thu, 05 Nov 2009) | 1 line

small tweak to cleanup the structure/pointer in case they want to use it again.
------------------------------------------------------------------------
r1410 | daquino | 2009-11-05 08:12:37 +0000 (Thu, 05 Nov 2009) | 6 lines

Got rid of the px version on the screen and tip.
More importantly started rendering DisplaySolidScrPolys() as solid again.
Because I set the font files to have an alpha channel making them subject to alpha func test.
This stops the text from getting blended which gives the text a more solid appearance.
Sooner or later the text needs to be cleaned up so black edges go away and they aren't very pretty.
It may be ideal to add a very small amount of translucency to the fonts to smooth the edges out while not making them so transparent.
------------------------------------------------------------------------
r1411 | daquino | 2009-11-05 08:13:26 +0000 (Thu, 05 Nov 2009) | 1 line

cleaned up the window edges so they look better.
------------------------------------------------------------------------
r1412 | daquino | 2009-11-05 08:21:59 +0000 (Thu, 05 Nov 2009) | 1 line

small comment fix for clarity.
------------------------------------------------------------------------
r1413 | daquino | 2009-11-06 06:01:00 +0000 (Fri, 06 Nov 2009) | 2 lines

Creating a new clean trunk branch to work on porting to mingw/sdl and all the other fun stuff!

------------------------------------------------------------------------
r1414 | daquino | 2009-11-06 06:18:22 +0000 (Fri, 06 Nov 2009) | 1 line

moving things around
------------------------------------------------------------------------
r1415 | daquino | 2009-11-06 06:19:38 +0000 (Fri, 06 Nov 2009) | 1 line

these libs are all prebuilt to work with the msvc9 setup
------------------------------------------------------------------------
r1416 | daquino | 2009-11-06 06:20:24 +0000 (Fri, 06 Nov 2009) | 1 line

these libs are all prebuilt to work with the msvc9 setup
------------------------------------------------------------------------
r1417 | daquino | 2009-11-06 06:22:14 +0000 (Fri, 06 Nov 2009) | 1 line

had the readme files in the wrong place
------------------------------------------------------------------------
r1418 | daquino | 2009-11-06 06:22:56 +0000 (Fri, 06 Nov 2009) | 1 line

should of been in the lib folder
------------------------------------------------------------------------
r1419 | daquino | 2009-11-06 06:25:40 +0000 (Fri, 06 Nov 2009) | 1 line

updating the notes
------------------------------------------------------------------------
r1420 | daquino | 2009-11-06 07:21:29 +0000 (Fri, 06 Nov 2009) | 1 line

Devil/OpenIL wasn't even used at the end of d3d9 branch cutover.
------------------------------------------------------------------------
r1421 | daquino | 2009-11-06 07:42:51 +0000 (Fri, 06 Nov 2009) | 3 lines

Updated svn:ignore's
Updated paths in the vproj

------------------------------------------------------------------------
r1422 | daquino | 2009-11-06 09:13:08 +0000 (Fri, 06 Nov 2009) | 1 line

Updated the msvc9 project folder to build with the new folder layouts.
------------------------------------------------------------------------
r1423 | daquino | 2009-11-08 17:30:07 +0000 (Sun, 08 Nov 2009) | 1 line

various mingw fixes.
------------------------------------------------------------------------
r1424 | daquino | 2009-11-08 18:41:01 +0000 (Sun, 08 Nov 2009) | 5 lines

replaced the old d3dx routines for loading textures.
created a separate build configuration which includes breakpad.
removed breakpad from the debug/release configurations.
made the release configuration not generate any debug info and use optimizations.
removed the un-needed prebuilt libs for libpng/libzlib.
------------------------------------------------------------------------
r1425 | daquino | 2009-11-08 23:19:54 +0000 (Sun, 08 Nov 2009) | 3 lines

added sdl to the project.
replaced window message loop and InitWindow with sdl routines.
added 32x32 window icon in bmp format for sdl.
------------------------------------------------------------------------
r1426 | daquino | 2009-11-08 23:35:21 +0000 (Sun, 08 Nov 2009) | 2 lines

added some proper cleanup of sdl.
some more sdl error detection code.
------------------------------------------------------------------------
r1427 | daquino | 2009-11-09 00:28:44 +0000 (Mon, 09 Nov 2009) | 4 lines

set window position isn't really workable through sdl.
it's not really needed anyway...
window managers should handle it...
we don't need the icon stuff anymore either.
------------------------------------------------------------------------
r1428 | daquino | 2009-11-09 07:06:50 +0000 (Mon, 09 Nov 2009) | 4 lines

window manager should be handling remembering where the window is so all that was removed.
ported some code to the sdl window handling events.
MouseInput was pretty retarded option so i removed it.
Some how dinput is working side by side with sdl now.
------------------------------------------------------------------------
r1429 | daquino | 2009-11-10 07:30:06 +0000 (Tue, 10 Nov 2009) | 7 lines

added mouse wheel support through sdl.
added sdl mouse state structure that ReadMouse() can poll from.
removed mouse exclusive in case it was competing with sdl.
sdl controls it's own exclusive/shared access modes anyway.
ignore_mouse_input isn't needed anymore.
figured out the SDL_KEYDOWN issue.
cleaned up old unused code in controls.c
------------------------------------------------------------------------
r1430 | daquino | 2009-11-10 08:30:18 +0000 (Tue, 10 Nov 2009) | 2 lines

added left/middle/right mouse button support through sdl.

------------------------------------------------------------------------
r1431 | daquino | 2009-11-12 08:28:23 +0000 (Thu, 12 Nov 2009) | 3 lines

ported mouse motion events to use sdl data.
started porting low level cursor and input routines to sdl calls in input_dinput.c

------------------------------------------------------------------------
r1432 | daquino | 2009-11-12 08:32:12 +0000 (Thu, 12 Nov 2009) | 1 line

removed all direct input code that had to do with the mouse.
------------------------------------------------------------------------
r1433 | daquino | 2009-11-12 08:36:49 +0000 (Thu, 12 Nov 2009) | 1 line

Going into the menu in game provides this exact functionality.
------------------------------------------------------------------------
r1434 | daquino | 2009-11-12 08:42:26 +0000 (Thu, 12 Nov 2009) | 1 line

added some todo's and made title screen release mouse in window mode.
------------------------------------------------------------------------
r1435 | daquino | 2009-11-13 04:33:01 +0000 (Fri, 13 Nov 2009) | 1 line

some note updates.
------------------------------------------------------------------------
r1436 | daquino | 2009-11-13 04:35:20 +0000 (Fri, 13 Nov 2009) | 1 line

getting rid of unused code.
------------------------------------------------------------------------
r1437 | daquino | 2009-11-13 04:38:04 +0000 (Fri, 13 Nov 2009) | 1 line

got rid of unneeded code.
------------------------------------------------------------------------
r1438 | daquino | 2009-11-13 04:41:32 +0000 (Fri, 13 Nov 2009) | 1 line

got rid of unneeded code.
------------------------------------------------------------------------
r1439 | daquino | 2009-11-13 04:56:57 +0000 (Fri, 13 Nov 2009) | 1 line

updated to use new mouse state structures.
------------------------------------------------------------------------
r1440 | daquino | 2009-11-15 02:38:57 +0000 (Sun, 15 Nov 2009) | 1 line

broke sdl inputs into it's own file.
------------------------------------------------------------------------
r1441 | daquino | 2009-11-15 02:43:29 +0000 (Sun, 15 Nov 2009) | 1 line

should have been in last commit.
------------------------------------------------------------------------
r1442 | daquino | 2009-11-15 02:44:18 +0000 (Sun, 15 Nov 2009) | 1 line

IsKeyPressed() is only used for keyboard input.
------------------------------------------------------------------------
r1443 | daquino | 2009-11-15 05:29:00 +0000 (Sun, 15 Nov 2009) | 1 line

this function never needs to look at the mouse.
------------------------------------------------------------------------
r1444 | daquino | 2009-11-15 05:35:39 +0000 (Sun, 15 Nov 2009) | 1 line

this simplifies the code and supports more mouse buttons.
------------------------------------------------------------------------
r1445 | daquino | 2009-11-15 05:46:28 +0000 (Sun, 15 Nov 2009) | 1 line

code better supports mouse key expansion and uses sdl input numbering.
------------------------------------------------------------------------
r1446 | daquino | 2009-11-15 07:29:59 +0000 (Sun, 15 Nov 2009) | 3 lines

moved number of mouse buttons to header file.
defined proper number for wheel up/down.
some other things.
------------------------------------------------------------------------
r1447 | daquino | 2009-11-15 17:44:43 +0000 (Sun, 15 Nov 2009) | 2 lines

process system events at the end of the loop cause it wipes out all events
we want the rest of the game to have a chance to peep events
------------------------------------------------------------------------
r1448 | daquino | 2009-11-15 19:56:57 +0000 (Sun, 15 Nov 2009) | 2 lines

menu processing is now done through sdl.
a buffered keyboard was simulated up to 100 events each loop.
------------------------------------------------------------------------
r1449 | daquino | 2009-11-15 20:21:30 +0000 (Sun, 15 Nov 2009) | 1 line

Replaced IsKeyHeld with SDL_GetModState
------------------------------------------------------------------------
r1450 | daquino | 2009-11-15 20:44:57 +0000 (Sun, 15 Nov 2009) | 2 lines

IsKeyPressed was ported to buffered_key_released.

------------------------------------------------------------------------
r1451 | daquino | 2009-11-15 20:52:35 +0000 (Sun, 15 Nov 2009) | 1 line

no need for this tweak anymore.
------------------------------------------------------------------------
r1452 | daquino | 2009-11-15 21:08:07 +0000 (Sun, 15 Nov 2009) | 1 line

removed all dinput buffered keyboard routines.
------------------------------------------------------------------------
r1453 | daquino | 2009-11-15 22:08:57 +0000 (Sun, 15 Nov 2009) | 1 line

hacked mouse menu events into the buffered keyboard.
------------------------------------------------------------------------
r1454 | daquino | 2009-11-16 03:44:06 +0000 (Mon, 16 Nov 2009) | 5 lines

Ported keyboard handling for user configured keys to sdl.
Re-enabled mouse navigation in menu's.
Auto generating vkey_map on the fly using SDL_GetKeyName().
config files need to be hand edited to the new format.
cleaned up various stuff as I went along.
------------------------------------------------------------------------
r1455 | daquino | 2009-11-16 05:08:18 +0000 (Mon, 16 Nov 2009) | 1 line

ported Sleep to SDL_Delay.
------------------------------------------------------------------------
r1456 | daquino | 2009-11-16 05:53:50 +0000 (Mon, 16 Nov 2009) | 1 line

ported timer.h/c to use SDL_GetTicks.
------------------------------------------------------------------------
r1457 | daquino | 2009-11-16 06:41:34 +0000 (Mon, 16 Nov 2009) | 1 line

moving some code around.
------------------------------------------------------------------------
r1458 | daquino | 2009-11-16 06:52:51 +0000 (Mon, 16 Nov 2009) | 1 line

comment update.
------------------------------------------------------------------------
r1459 | daquino | 2009-11-16 07:14:06 +0000 (Mon, 16 Nov 2009) | 1 line

Updating build notes.
------------------------------------------------------------------------
r1460 | daquino | 2009-11-16 07:20:49 +0000 (Mon, 16 Nov 2009) | 1 line

casted comparison of double's to float to get rid of small rounding errors which caused entire texture suite to be reloaded when it was not requested.
------------------------------------------------------------------------
r1461 | daquino | 2009-11-16 08:40:07 +0000 (Mon, 16 Nov 2009) | 8 lines

started creating a framework for opengl.
created render_opengl.c with a list of stub functions to be filled.
added a visual studios build configuration which defines OPENGL.
moved window/d3d specific header files to render_d3d.cpp.
updated some functions to expect generic data instead of d3d specific types.
renamed a bunch of custom types that had D3D in the name.
moved typedefs.h to main.h

------------------------------------------------------------------------
r1462 | daquino | 2009-11-16 08:41:52 +0000 (Mon, 16 Nov 2009) | 1 line

updated new opengl configuration to use different folders building.
------------------------------------------------------------------------
r1463 | daquino | 2009-11-16 08:57:21 +0000 (Mon, 16 Nov 2009) | 3 lines

fixed opengl debug vcproj configuration to properly define OPENGL.
moved bSquareOnly to be defined in render.h and initialized in init_renderer()
fixed all unresolved linker issues.
------------------------------------------------------------------------
r1464 | daquino | 2009-11-17 04:42:36 +0000 (Tue, 17 Nov 2009) | 1 line

removed d3d9.h include from various files.
------------------------------------------------------------------------
r1465 | daquino | 2009-11-17 05:15:03 +0000 (Tue, 17 Nov 2009) | 5 lines

renamed various things to not have D3D in the name.
copied some windows defines to be part of forsaken.
disabled some more demo code.
moved some things into render_d3d.cpp that didn't belong in render.h

------------------------------------------------------------------------
r1466 | daquino | 2009-11-17 06:01:12 +0000 (Tue, 17 Nov 2009) | 2 lines

created a void* define for texture pointers to make code some what readable.
kinda ugly but it removed dependency on the d3d type.
------------------------------------------------------------------------
r1467 | daquino | 2009-11-17 06:26:59 +0000 (Tue, 17 Nov 2009) | 2 lines

created a void* define for vertex/index pointers to make code some what readable.
kinda ugly but it removed dependency on the d3d types from the rest of the code.
------------------------------------------------------------------------
r1468 | daquino | 2009-11-17 06:36:42 +0000 (Tue, 17 Nov 2009) | 1 line

created RENDERMATERIAL as a copy of D3DMATERIAL9 to remove dependency from d3d9.
------------------------------------------------------------------------
r1469 | daquino | 2009-11-17 06:58:31 +0000 (Tue, 17 Nov 2009) | 1 line

abstracted setting proj/world/view matrix's behind api.
------------------------------------------------------------------------
r1470 | daquino | 2009-11-17 07:10:22 +0000 (Tue, 17 Nov 2009) | 1 line

abstracted getting world matrix behind api.
------------------------------------------------------------------------
r1471 | daquino | 2009-11-17 07:15:31 +0000 (Tue, 17 Nov 2009) | 1 line

copied D3DMATRIX and renamed it RENDERMATRIX so remove dependency on d3d9.
------------------------------------------------------------------------
r1472 | daquino | 2009-11-17 07:42:22 +0000 (Tue, 17 Nov 2009) | 2 lines

updated to remove d3d specific stuff and only require what was needed for the api.
at this point we are compiling with d3d9.h only imported in render_d3d.cpp
------------------------------------------------------------------------
r1473 | daquino | 2009-11-18 04:57:20 +0000 (Wed, 18 Nov 2009) | 1 line

cleaning up some comments.
------------------------------------------------------------------------
r1474 | daquino | 2009-11-18 05:00:41 +0000 (Wed, 18 Nov 2009) | 5 lines

broke off some sdl init code into it's own file.
set Debug to TRUE before cli is parsed which will turn it off/on by user.
added some debug info displaying sdl version info.
added some sdl/gl initialization code.
saving the sdl screen to render_info
------------------------------------------------------------------------
r1475 | daquino | 2009-11-19 04:29:30 +0000 (Thu, 19 Nov 2009) | 3 lines

SDL_HWSURFACE apparently not needed.
added some documentation to render_d3d.cpp
filled in some function in render_opengl.c
------------------------------------------------------------------------
r1476 | daquino | 2009-11-19 04:31:37 +0000 (Thu, 19 Nov 2009) | 1 line

fixed some compile errors from the last commit.
------------------------------------------------------------------------
r1477 | daquino | 2009-11-19 04:48:13 +0000 (Thu, 19 Nov 2009) | 1 line

link time compilation requirements for gl on win32.
------------------------------------------------------------------------
r1478 | daquino | 2009-11-19 05:14:20 +0000 (Thu, 19 Nov 2009) | 1 line

render error description port.
------------------------------------------------------------------------
r1479 | daquino | 2009-11-19 05:25:16 +0000 (Thu, 19 Nov 2009) | 1 line

ported FSClearBlack and non gl specific reseting of RENDEROBJECT in FSReleaseRenderObject
------------------------------------------------------------------------
r1480 | daquino | 2009-11-19 05:33:01 +0000 (Thu, 19 Nov 2009) | 3 lines

removed the Count flag from FSClear as it was never used nor do i think it will ever be wanted.
added some notes to FSClearBlack because the implementation is not clear 

------------------------------------------------------------------------
r1481 | daquino | 2009-11-19 05:45:48 +0000 (Thu, 19 Nov 2009) | 2 lines

created FSClearDepth to simplify the api.

------------------------------------------------------------------------
r1482 | daquino | 2009-11-19 06:27:49 +0000 (Thu, 19 Nov 2009) | 2 lines

simplified the arguments to FSClear based on existing usage of the function.
it will now only support clearing the color buffer to opaque black and zbuff to 1.0f.
------------------------------------------------------------------------
r1483 | daquino | 2009-11-19 06:32:33 +0000 (Thu, 19 Nov 2009) | 3 lines

removed FSColourKeyBlack from render.h as it's very d3d specific.
colourkey arguments in textures functions are only boolean and do not require it.

------------------------------------------------------------------------
r1484 | daquino | 2009-11-19 06:36:13 +0000 (Thu, 19 Nov 2009) | 1 line

fixed mistake on last commit.
------------------------------------------------------------------------
r1485 | daquino | 2009-11-19 06:56:15 +0000 (Thu, 19 Nov 2009) | 1 line

ported set_alpha_fx_states set_alpha_states set_trans_state_9 unset_alpha_ignore and set_alpha_ignore
------------------------------------------------------------------------
r1486 | daquino | 2009-11-19 07:00:35 +0000 (Thu, 19 Nov 2009) | 2 lines

copied code for render_mode_select , render_reset as they both had no gl/dx code.
added some notes for how to port some other areas.
------------------------------------------------------------------------
r1487 | daquino | 2009-11-19 07:05:08 +0000 (Thu, 19 Nov 2009) | 1 line

some comment updates
------------------------------------------------------------------------
r1488 | daquino | 2009-11-19 07:38:09 +0000 (Thu, 19 Nov 2009) | 3 lines

lots of comment updating.
added vsync switcher.

------------------------------------------------------------------------
r1489 | daquino | 2009-11-19 07:39:06 +0000 (Thu, 19 Nov 2009) | 1 line

comment updates.
------------------------------------------------------------------------
r1490 | daquino | 2009-11-20 03:47:11 +0000 (Fri, 20 Nov 2009) | 1 line

changed FSEndScene and FSBeginScene to return BOOL instead of HRESULT.
------------------------------------------------------------------------
r1491 | daquino | 2009-11-20 04:00:52 +0000 (Fri, 20 Nov 2009) | 1 line

deleted a bunch of old code and renamed some things.
------------------------------------------------------------------------
r1492 | daquino | 2009-11-20 04:19:39 +0000 (Fri, 20 Nov 2009) | 1 line

converted FSGetWorld, FSSetWorld, FSGetViewPort, FSSetViewPort, FSSetProjection, FSGetViewPort to return a BOOL instead of an HRESULT.
------------------------------------------------------------------------
r1493 | daquino | 2009-11-20 08:46:37 +0000 (Fri, 20 Nov 2009) | 2 lines

ported FSSetViewPort and added more comments.
cleaned up some unused view port variable.
------------------------------------------------------------------------
r1494 | daquino | 2009-11-20 08:47:22 +0000 (Fri, 20 Nov 2009) | 1 line

fixed bug from last commit.
------------------------------------------------------------------------
r1495 | daquino | 2009-11-20 09:18:04 +0000 (Fri, 20 Nov 2009) | 1 line

ported FSGetViewPort but released my math for converting top/left <-> bottom/right is totally broken.
------------------------------------------------------------------------
r1496 | daquino | 2009-11-21 06:42:44 +0000 (Sat, 21 Nov 2009) | 3 lines

FSSetMaterial was completely pointless.
Just looks like old d3d6 needed to pass the material to d3d9 to initialize it into some other format.
This is not required at all anymore.
------------------------------------------------------------------------
r1497 | daquino | 2009-11-21 07:56:10 +0000 (Sat, 21 Nov 2009) | 2 lines

ported get/set view/world/proj matrix functions.
hopefully this was done correctly but we can't know till later.
------------------------------------------------------------------------
r1498 | daquino | 2009-11-21 08:04:09 +0000 (Sat, 21 Nov 2009) | 1 line

some comment updates.
------------------------------------------------------------------------
r1499 | daquino | 2009-11-21 08:32:54 +0000 (Sat, 21 Nov 2009) | 1 line

fixed a small bug here cause lp is already a pointer and we want a pointer to a pointer not a pointer to a pointer to a pointer ....
------------------------------------------------------------------------
r1500 | daquino | 2009-11-21 10:07:10 +0000 (Sat, 21 Nov 2009) | 5 lines

some code/comment cleaning/fixing.
added opengl version printing to the top of init_renderer.
couldn't get glext to work for gl*Transpose* functions.
so i wrote transpose_matrix which converts matrix between row/col major.
made FSCreate* functions malloc and FSLock* to return memory pointers.
------------------------------------------------------------------------
r1501 | daquino | 2009-11-21 11:08:30 +0000 (Sat, 21 Nov 2009) | 5 lines

enabled wireframe for now until we see something.
added info->bRenderingIsOK = TRUE; which allowed the game to run.
fixed bug in FSClearBlack.
tried to fix the viewport code but then again render_info hasn't been setup by us yet.
added some test code to draw_object to attempt to draw something for hell of it.
------------------------------------------------------------------------
r1502 | daquino | 2009-11-21 19:23:25 +0000 (Sat, 21 Nov 2009) | 2 lines

finalized some more initialization stuff that d3d9 did.
drew a triangle clock wise to get something on the screen.
------------------------------------------------------------------------
r1503 | daquino | 2009-11-21 20:08:10 +0000 (Sat, 21 Nov 2009) | 1 line

refactored some code.
------------------------------------------------------------------------
r1504 | daquino | 2009-11-21 21:07:30 +0000 (Sat, 21 Nov 2009) | 1 line

changed draw_* routines to return BOOL instead of HRESULT.
------------------------------------------------------------------------
r1505 | daquino | 2009-11-21 21:45:09 +0000 (Sat, 21 Nov 2009) | 1 line

drew the raw vertex list.
------------------------------------------------------------------------
r1506 | daquino | 2009-11-21 22:30:40 +0000 (Sat, 21 Nov 2009) | 3 lines

added some nicer names to TLVERTEX.
created a draw_indexed_list routine for generic drawing in opengl.

------------------------------------------------------------------------
r1507 | daquino | 2009-11-21 23:17:49 +0000 (Sat, 21 Nov 2009) | 1 line

converted DEBUG to DEBUG_ON and got rid of DPTEST
------------------------------------------------------------------------
r1508 | daquino | 2009-11-21 23:37:02 +0000 (Sat, 21 Nov 2009) | 1 line

renamed include statements to be lower case.
------------------------------------------------------------------------
r1509 | daquino | 2009-11-21 23:53:13 +0000 (Sat, 21 Nov 2009) | 2 lines

ported util.c/h to be cross platform.
removed all the unneeded GUID functions.
------------------------------------------------------------------------
r1510 | daquino | 2009-11-22 00:00:07 +0000 (Sun, 22 Nov 2009) | 1 line

user passes new line on his own.
------------------------------------------------------------------------
r1511 | daquino | 2009-11-22 00:54:38 +0000 (Sun, 22 Nov 2009) | 2 lines

removing need of windows.h from various files.
cleaning up unused code.
------------------------------------------------------------------------
r1512 | daquino | 2009-11-22 01:05:05 +0000 (Sun, 22 Nov 2009) | 1 line

ported xmem files to not require windows.h
------------------------------------------------------------------------
r1513 | daquino | 2009-11-22 01:26:55 +0000 (Sun, 22 Nov 2009) | 1 line

removing need of windows.h from various files.
------------------------------------------------------------------------
r1514 | daquino | 2009-11-22 01:47:16 +0000 (Sun, 22 Nov 2009) | 2 lines

finished porting the functions to BOOL instead of int.
fixes a bug in the last commit.
------------------------------------------------------------------------
r1515 | daquino | 2009-11-22 01:51:13 +0000 (Sun, 22 Nov 2009) | 2 lines

got rid of two unneeded files.
also gets rid of another file pulling in windows.h
------------------------------------------------------------------------
r1516 | daquino | 2009-11-22 02:01:25 +0000 (Sun, 22 Nov 2009) | 1 line

got rid of support for joysticks in non WIN32 removing more need for windows.h
------------------------------------------------------------------------
r1517 | daquino | 2009-11-22 02:06:42 +0000 (Sun, 22 Nov 2009) | 2 lines

defined WIN32_EXTRA_LEAN in main.h only if WIN32.

------------------------------------------------------------------------
r1518 | daquino | 2009-11-22 06:16:15 +0000 (Sun, 22 Nov 2009) | 1 line

gears.c was just a temporary toy to see something render.
------------------------------------------------------------------------
r1519 | daquino | 2009-11-22 06:20:29 +0000 (Sun, 22 Nov 2009) | 5 lines

wireframe rendering in opengl works properly !!!!
ported FSGetWorld , set proj/view/world functions to work like d3d9 pipe line did.
added support for drawing render objects which have no index list...
moved aspect ration into render_info and initialize it after changing resolutions in init_renderer. also fixed it up to return a more precise value.
removed ability to tweak the aspect ration.  the user should simply change to a resolution matching the screen.
------------------------------------------------------------------------
r1520 | daquino | 2009-11-22 06:43:19 +0000 (Sun, 22 Nov 2009) | 2 lines

converted the code to be a bit more modular. 
ported vertex color.
------------------------------------------------------------------------
r1521 | daquino | 2009-11-22 07:12:19 +0000 (Sun, 22 Nov 2009) | 1 line

ported material and alpha ignore.
------------------------------------------------------------------------
r1522 | daquino | 2009-11-22 07:27:14 +0000 (Sun, 22 Nov 2009) | 1 line

gl specular exponent =~ d3d specular sharpness
------------------------------------------------------------------------
r1523 | daquino | 2009-11-22 07:49:43 +0000 (Sun, 22 Nov 2009) | 1 line


------------------------------------------------------------------------
r1524 | daquino | 2009-11-22 07:50:20 +0000 (Sun, 22 Nov 2009) | 1 line

mistake to commit this from last time.
------------------------------------------------------------------------
r1525 | daquino | 2009-11-22 09:38:01 +0000 (Sun, 22 Nov 2009) | 5 lines

specified texture coords.
had to change the order of code around.
and apparently set_alpha_ignore must be called outside of gl begin/end.
but it seems to cause everything to be hidden.
so i disabled it for now.
------------------------------------------------------------------------
r1526 | daquino | 2009-11-22 09:52:03 +0000 (Sun, 22 Nov 2009) | 2 lines

improved error detection function to clear all errors.
checking for errors once a loop after rendering.
------------------------------------------------------------------------
r1527 | daquino | 2009-11-22 10:31:39 +0000 (Sun, 22 Nov 2009) | 1 line

forsaken has matrix transpose and other functions in new3d.h
------------------------------------------------------------------------
r1528 | daquino | 2009-11-22 11:17:51 +0000 (Sun, 22 Nov 2009) | 2 lines

fixed FSClear to only clear the current viewport area.
rendering level now works properly with mini cameras.
------------------------------------------------------------------------
r1529 | daquino | 2009-11-22 11:32:54 +0000 (Sun, 22 Nov 2009) | 2 lines

fixed color extraction code.
now properly drawing colored vertexes.
------------------------------------------------------------------------
r1530 | daquino | 2009-11-22 11:56:59 +0000 (Sun, 22 Nov 2009) | 2 lines

comment updating.
and added perspective correction hint.
------------------------------------------------------------------------
r1531 | daquino | 2009-11-22 23:14:33 +0000 (Sun, 22 Nov 2009) | 3 lines

fixed bug in drawing 2d elements.
added support for drawing in 2d mode.
text drawing now works properly.
------------------------------------------------------------------------
r1532 | daquino | 2009-11-23 04:08:05 +0000 (Mon, 23 Nov 2009) | 3 lines

added libpng/zlib back into the project to use texture_png.c
added some basic template for using sdl_image for image loading but it's not even tested.
implemented the initial opengl texture routines.
------------------------------------------------------------------------
r1533 | daquino | 2009-11-23 04:10:59 +0000 (Mon, 23 Nov 2009) | 1 line

fixed the ordering of rgba to get the right colors.
------------------------------------------------------------------------
r1534 | daquino | 2009-11-23 05:44:43 +0000 (Mon, 23 Nov 2009) | 3 lines

OpenGL works great!
fixed the order of matrix calculations which fixed the weird placement of objects.
also fixed the alpha func more or less but it still needs some work.
------------------------------------------------------------------------
r1535 | daquino | 2009-11-23 06:13:23 +0000 (Mon, 23 Nov 2009) | 1 line

fixed alpha func test to properly ignore fragments with less than 100/255 alpha value.
------------------------------------------------------------------------
r1536 | daquino | 2009-11-23 07:19:37 +0000 (Mon, 23 Nov 2009) | 1 line

now properly handling bpp/fullscreen settings.
------------------------------------------------------------------------
r1537 | daquino | 2009-11-23 07:21:28 +0000 (Mon, 23 Nov 2009) | 3 lines

moved matrix calculations to happen on set world/view instead of in render routines.
enabled dithering explicitly but doesn't seem to be helping in 16bit mode.
lots of comment updating and general code cleaning.
------------------------------------------------------------------------
r1538 | daquino | 2009-11-23 07:24:39 +0000 (Mon, 23 Nov 2009) | 1 line

updated vcproj to define TEXTURE_PNG not texture.h
------------------------------------------------------------------------
r1539 | daquino | 2009-11-23 07:33:51 +0000 (Mon, 23 Nov 2009) | 3 lines

removed the mouse duplicate last input routines.
doesn't seem to be needed anymore.
it was a hack to get around frame lag.
------------------------------------------------------------------------
r1540 | daquino | 2009-11-23 07:38:43 +0000 (Mon, 23 Nov 2009) | 1 line

moved ReadInputs higher up the render loop in attempt to make input handling snappier.
------------------------------------------------------------------------
r1541 | daquino | 2009-11-23 08:54:26 +0000 (Mon, 23 Nov 2009) | 1 line

added ability to update textures using update_texture_from_file().
------------------------------------------------------------------------
r1542 | daquino | 2009-11-23 08:56:08 +0000 (Mon, 23 Nov 2009) | 1 line

missing line ending on debug.
------------------------------------------------------------------------
r1543 | daquino | 2009-11-25 03:09:21 +0000 (Wed, 25 Nov 2009) | 3 lines

added some comments.
hid some demo code.
fixed a bug in a viewport call.
------------------------------------------------------------------------
r1544 | daquino | 2009-11-25 03:16:09 +0000 (Wed, 25 Nov 2009) | 1 line

removed a function that basically did nothing.
------------------------------------------------------------------------
r1545 | daquino | 2009-11-25 03:54:56 +0000 (Wed, 25 Nov 2009) | 1 line

removed and unused sound function.
------------------------------------------------------------------------
r1546 | daquino | 2009-11-25 03:56:35 +0000 (Wed, 25 Nov 2009) | 1 line

should have been part of last commit.
------------------------------------------------------------------------
r1547 | daquino | 2009-11-25 04:11:14 +0000 (Wed, 25 Nov 2009) | 1 line

cleaned up some unused sound code.
------------------------------------------------------------------------
r1548 | daquino | 2009-11-25 04:46:22 +0000 (Wed, 25 Nov 2009) | 3 lines

cleaning up more sound routines.
totally deleted the xmem like functions for sound.

------------------------------------------------------------------------
r1549 | daquino | 2009-11-25 05:14:20 +0000 (Wed, 25 Nov 2009) | 1 line

more code cleaning and separating of sfx/dsutil
------------------------------------------------------------------------
r1550 | daquino | 2009-11-25 05:28:47 +0000 (Wed, 25 Nov 2009) | 1 line

this is not needed.
------------------------------------------------------------------------
r1551 | daquino | 2009-11-25 06:24:49 +0000 (Wed, 25 Nov 2009) | 2 lines

went out of my mind and shoved dsutil into sfx.c because sfx.c has massive dsound api all over it.  appears 3d sound is not even being incorporated.  the target to abstract now is sfx.c which should be the api the game uses to play sound.
at the same time i was forced to include windows.h in main.h because of various QueryPerformanceCounter calls throughout the code.
------------------------------------------------------------------------
r1552 | daquino | 2009-11-25 06:41:11 +0000 (Wed, 25 Nov 2009) | 2 lines

cleaning up header dependencies.

------------------------------------------------------------------------
r1553 | daquino | 2009-11-25 06:49:24 +0000 (Wed, 25 Nov 2009) | 1 line

added info about weather opengl stereo buffers are present.
------------------------------------------------------------------------
r1554 | daquino | 2009-11-28 21:03:46 +0000 (Sat, 28 Nov 2009) | 2 lines

created a SOUND_SUPPORT definition to allow building off of windows until OpenAL is ready.

------------------------------------------------------------------------
r1555 | daquino | 2009-11-28 21:38:39 +0000 (Sat, 28 Nov 2009) | 1 line

removed more demo support.
------------------------------------------------------------------------
r1556 | daquino | 2009-11-28 22:04:31 +0000 (Sat, 28 Nov 2009) | 1 line

ported count down clock to use timer.c
------------------------------------------------------------------------
r1557 | daquino | 2009-11-28 22:09:40 +0000 (Sat, 28 Nov 2009) | 1 line

should of been in the last commit.
------------------------------------------------------------------------
r1558 | daquino | 2009-11-28 22:29:09 +0000 (Sat, 28 Nov 2009) | 1 line

got rid of DisplayStatusMessages cause it was never really used.
------------------------------------------------------------------------
r1559 | daquino | 2009-11-28 22:52:56 +0000 (Sat, 28 Nov 2009) | 1 line

ported LargeTime/LastTime to timer.c
------------------------------------------------------------------------
r1560 | daquino | 2009-11-28 23:00:26 +0000 (Sat, 28 Nov 2009) | 1 line

disabled more demo code.
------------------------------------------------------------------------
r1561 | daquino | 2009-11-28 23:18:29 +0000 (Sat, 28 Nov 2009) | 1 line

sectioned off more demo code.
------------------------------------------------------------------------
r1562 | daquino | 2009-11-29 00:42:03 +0000 (Sun, 29 Nov 2009) | 1 line

converted some timers to use sdl get ticks.
------------------------------------------------------------------------
r1563 | daquino | 2009-11-29 01:52:31 +0000 (Sun, 29 Nov 2009) | 2 lines

updated more code to use built in timers.

------------------------------------------------------------------------
r1564 | daquino | 2009-11-29 02:01:49 +0000 (Sun, 29 Nov 2009) | 1 line

removed the need to define LONGLONG and include windows.h in main.h
------------------------------------------------------------------------
r1565 | daquino | 2009-11-29 02:23:38 +0000 (Sun, 29 Nov 2009) | 2 lines

windows.h was not needed here.
but it was renaming OpenEvent from BGO_FILE to be OpenEventA so I had to rename it.
------------------------------------------------------------------------
r1566 | daquino | 2009-11-29 02:36:51 +0000 (Sun, 29 Nov 2009) | 2 lines

removing HRESULT which depends on windows.h
and light which depended on some weird d3d9 header file but wasn't used.
------------------------------------------------------------------------
r1567 | daquino | 2009-11-29 04:08:09 +0000 (Sun, 29 Nov 2009) | 4 lines

created DINPUTJOY to section off dinput joystick code.
created "portable" vcproj configuration for testing builds that include no win32 support.
ported lots of code away from windows.h
co-initialize apparently is not needed anymore.
------------------------------------------------------------------------
r1568 | daquino | 2009-11-29 04:26:23 +0000 (Sun, 29 Nov 2009) | 1 line

ported some more code to use timers.
------------------------------------------------------------------------
r1569 | daquino | 2009-11-29 04:36:20 +0000 (Sun, 29 Nov 2009) | 1 line

ported oct2.c to not require windows.h
------------------------------------------------------------------------
r1570 | daquino | 2009-11-29 05:51:12 +0000 (Sun, 29 Nov 2009) | 1 line

abstracted winapi's FindFirstFile/FindNextFile behind my own api that can easily be ported for non win32.
------------------------------------------------------------------------
r1571 | daquino | 2009-11-29 06:10:51 +0000 (Sun, 29 Nov 2009) | 1 line

removed more dependency on win32.
------------------------------------------------------------------------
r1572 | daquino | 2009-11-29 06:25:48 +0000 (Sun, 29 Nov 2009) | 1 line

replaced timeGetTime with SDL_GetTicks and removed winsock.h.
------------------------------------------------------------------------
r1573 | daquino | 2009-11-29 06:31:44 +0000 (Sun, 29 Nov 2009) | 1 line

cleaning up the include list for file.c
------------------------------------------------------------------------
r1574 | daquino | 2009-11-29 06:35:30 +0000 (Sun, 29 Nov 2009) | 1 line

cleaning up the include list for file.c
------------------------------------------------------------------------
r1575 | daquino | 2009-11-29 06:40:13 +0000 (Sun, 29 Nov 2009) | 1 line

fixing conflicting function types.
------------------------------------------------------------------------
r1576 | daquino | 2009-11-29 06:56:01 +0000 (Sun, 29 Nov 2009) | 2 lines

apparently stdarg was needed in file.c.
fixed bug in enemies.txt loading.
------------------------------------------------------------------------
r1577 | daquino | 2009-11-29 06:59:40 +0000 (Sun, 29 Nov 2009) | 1 line

removing more winapi specific calls.
------------------------------------------------------------------------
r1578 | daquino | 2009-11-29 07:02:07 +0000 (Sun, 29 Nov 2009) | 1 line

removing more winapi specific calls.
------------------------------------------------------------------------
r1579 | daquino | 2009-11-29 07:10:20 +0000 (Sun, 29 Nov 2009) | 1 line

converted timer_t to px_timer_t because it's defined in time.h on unix.
------------------------------------------------------------------------
r1580 | daquino | 2009-11-29 07:17:59 +0000 (Sun, 29 Nov 2009) | 1 line

updating the template
------------------------------------------------------------------------
r1581 | daquino | 2009-11-29 07:24:17 +0000 (Sun, 29 Nov 2009) | 1 line

cleaned up unneeded system headers in oct2.c
------------------------------------------------------------------------
r1582 | daquino | 2009-11-29 07:32:31 +0000 (Sun, 29 Nov 2009) | 2 lines

fixed because of a gcc error.
apparently your not supposed to assign something that has been casted.
------------------------------------------------------------------------
r1583 | daquino | 2009-11-29 07:35:00 +0000 (Sun, 29 Nov 2009) | 1 line

apparently _cdecl was not making gcc happy for this callback.
------------------------------------------------------------------------
r1584 | daquino | 2009-11-29 08:34:34 +0000 (Sun, 29 Nov 2009) | 1 line

some more portability hacks
------------------------------------------------------------------------
r1585 | daquino | 2009-11-29 19:09:37 +0000 (Sun, 29 Nov 2009) | 1 line

fixed texture to have transparency.
------------------------------------------------------------------------
r1586 | daquino | 2009-11-29 19:21:28 +0000 (Sun, 29 Nov 2009) | 1 line

fixed dsound by adding CoInitialize before CoCreateInstance.
------------------------------------------------------------------------
r1587 | daquino | 2009-11-29 22:35:53 +0000 (Sun, 29 Nov 2009) | 6 lines

various portability conversions.
added definitions to map windows functions like _stricmp to strcasecmp etc...
ported file.c to be cross platform including convert_path() which makes it unix like...
created strtoupper to replace win32 _strupr.
moved some things to util.c/.h

------------------------------------------------------------------------
r1588 | daquino | 2009-11-29 23:03:01 +0000 (Sun, 29 Nov 2009) | 1 line

fixed up file.c for unix
------------------------------------------------------------------------
r1589 | daquino | 2009-11-29 23:09:42 +0000 (Sun, 29 Nov 2009) | 1 line

more unix fixes for file.c
------------------------------------------------------------------------
r1590 | daquino | 2009-11-29 23:19:38 +0000 (Sun, 29 Nov 2009) | 1 line

ported some code to use the file length function instead of win32 _filelength
------------------------------------------------------------------------
r1591 | daquino | 2009-11-30 00:27:44 +0000 (Mon, 30 Nov 2009) | 1 line

added ignore for projectx binary.
------------------------------------------------------------------------
r1592 | daquino | 2009-11-30 00:28:05 +0000 (Mon, 30 Nov 2009) | 1 line

added the linux Makefile
------------------------------------------------------------------------
r1593 | daquino | 2009-11-30 00:40:37 +0000 (Mon, 30 Nov 2009) | 1 line

unix fixes for node.c
------------------------------------------------------------------------
r1594 | daquino | 2009-11-30 01:26:10 +0000 (Mon, 30 Nov 2009) | 1 line

moved convert_path to util.c so it can be reused; renamed path in lua_common.c to be lower case
------------------------------------------------------------------------
r1595 | daquino | 2009-11-30 01:27:03 +0000 (Mon, 30 Nov 2009) | 1 line

converted paths to lowercase
------------------------------------------------------------------------
r1596 | daquino | 2009-11-30 01:28:18 +0000 (Mon, 30 Nov 2009) | 1 line

renamed paths to be lower case
------------------------------------------------------------------------
r1597 | daquino | 2009-11-30 01:28:55 +0000 (Mon, 30 Nov 2009) | 1 line

native linux builds on the way
------------------------------------------------------------------------
r1598 | daquino | 2009-11-30 01:30:05 +0000 (Mon, 30 Nov 2009) | 1 line

renamed to lower case
------------------------------------------------------------------------
r1599 | daquino | 2009-11-30 01:36:35 +0000 (Mon, 30 Nov 2009) | 1 line

renamed data to lower case
------------------------------------------------------------------------
r1600 | daquino | 2009-11-30 01:38:06 +0000 (Mon, 30 Nov 2009) | 1 line

renaming to lower case
------------------------------------------------------------------------
r1601 | daquino | 2009-11-30 01:39:27 +0000 (Mon, 30 Nov 2009) | 1 line

renaming to lower case
------------------------------------------------------------------------
r1602 | daquino | 2009-11-30 02:08:30 +0000 (Mon, 30 Nov 2009) | 1 line

renaming files to lowercase
------------------------------------------------------------------------
r1603 | daquino | 2009-11-30 02:28:57 +0000 (Mon, 30 Nov 2009) | 1 line

renaming to lower case
------------------------------------------------------------------------
r1604 | daquino | 2009-11-30 02:30:40 +0000 (Mon, 30 Nov 2009) | 1 line

renaming to lower case
------------------------------------------------------------------------
r1605 | daquino | 2009-11-30 02:31:49 +0000 (Mon, 30 Nov 2009) | 1 line

renaming to lower case
------------------------------------------------------------------------
r1606 | daquino | 2009-11-30 02:32:55 +0000 (Mon, 30 Nov 2009) | 1 line

renaming to lowercase
------------------------------------------------------------------------
r1607 | daquino | 2009-11-30 02:44:02 +0000 (Mon, 30 Nov 2009) | 1 line

renaming files
------------------------------------------------------------------------
r1608 | daquino | 2009-11-30 02:44:57 +0000 (Mon, 30 Nov 2009) | 1 line

renaming files
------------------------------------------------------------------------
r1609 | daquino | 2009-11-30 02:45:27 +0000 (Mon, 30 Nov 2009) | 1 line

renaming files
------------------------------------------------------------------------
r1610 | daquino | 2009-11-30 02:45:51 +0000 (Mon, 30 Nov 2009) | 1 line

renaming files
------------------------------------------------------------------------
r1611 | daquino | 2009-11-30 02:47:49 +0000 (Mon, 30 Nov 2009) | 1 line

renaming files
------------------------------------------------------------------------
r1612 | daquino | 2009-11-30 02:48:46 +0000 (Mon, 30 Nov 2009) | 1 line

renaming files
------------------------------------------------------------------------
r1613 | daquino | 2009-11-30 02:49:54 +0000 (Mon, 30 Nov 2009) | 1 line

renaming files
------------------------------------------------------------------------
r1614 | daquino | 2009-11-30 02:55:02 +0000 (Mon, 30 Nov 2009) | 1 line

renaming files
------------------------------------------------------------------------
r1615 | daquino | 2009-11-30 02:56:06 +0000 (Mon, 30 Nov 2009) | 1 line

renaming to lowercase
------------------------------------------------------------------------
r1616 | daquino | 2009-11-30 02:58:55 +0000 (Mon, 30 Nov 2009) | 1 line

renaming to lowercase
------------------------------------------------------------------------
r1617 | daquino | 2009-11-30 03:01:45 +0000 (Mon, 30 Nov 2009) | 1 line

renaming to lowercase
------------------------------------------------------------------------
r1618 | daquino | 2009-11-30 15:12:28 +0000 (Mon, 30 Nov 2009) | 1 line

fixed missing path conversion in Read File
------------------------------------------------------------------------
r1619 | daquino | 2009-11-30 15:13:32 +0000 (Mon, 30 Nov 2009) | 1 line

missing new line at end of file bugs out some versions of gcc apparently
------------------------------------------------------------------------
r1620 | daquino | 2009-11-30 15:23:41 +0000 (Mon, 30 Nov 2009) | 1 line

stragling fopen calls needed to use convert_path; these should get updated to use file.c
------------------------------------------------------------------------
r1621 | daquino | 2009-11-30 16:02:34 +0000 (Mon, 30 Nov 2009) | 1 line

created fiopen wrapper called file_open which fixes up the path using convert_path
------------------------------------------------------------------------
r1622 | daquino | 2009-12-02 08:34:18 +0000 (Wed, 02 Dec 2009) | 1 line

updated to initialize proper bit sizes for rgba and add better debugging on initialization
------------------------------------------------------------------------
r1623 | daquino | 2009-12-02 08:46:58 +0000 (Wed, 02 Dec 2009) | 1 line

refactoring the code a bit
------------------------------------------------------------------------
r1624 | daquino | 2009-12-02 09:05:12 +0000 (Wed, 02 Dec 2009) | 1 line

fixed texture bug in linux by disabling gamma correction for time being
------------------------------------------------------------------------
r1625 | daquino | 2009-12-02 10:32:49 +0000 (Wed, 02 Dec 2009) | 1 line

small bug fix to a function and more debugging info
------------------------------------------------------------------------
r1626 | lion | 2009-12-02 16:27:22 +0000 (Wed, 02 Dec 2009) | 2 lines

Implemented the find_* functions for Linux.

------------------------------------------------------------------------
r1627 | daquino | 2009-12-03 04:56:10 +0000 (Thu, 03 Dec 2009) | 1 line

fixed alpha func and properly disabled only gamma correction
------------------------------------------------------------------------
r1628 | daquino | 2009-12-03 07:28:54 +0000 (Thu, 03 Dec 2009) | 1 line

fixed a simple bug
------------------------------------------------------------------------
r1629 | daquino | 2009-12-03 07:32:18 +0000 (Thu, 03 Dec 2009) | 1 line

fixed gamme correction in linux; apparently this should break in win32 as well; the table lookups and writes all had the wrong sign; also just cleaned it up to make it look better
------------------------------------------------------------------------
r1630 | daquino | 2009-12-05 06:19:15 +0000 (Sat, 05 Dec 2009) | 1 line

added anisotropic filtering to make textures look better at flat (anisotropic) angles; added a capabilities struct and detect_caps() function
------------------------------------------------------------------------
r1631 | daquino | 2009-12-05 06:21:42 +0000 (Sat, 05 Dec 2009) | 1 line

i have no idea why this code would ever be written but i think it's the reason the mouse was all messed up on linux especially with higher frame rates; doesn't seem to affect performance on win32 so going to try it out
------------------------------------------------------------------------
r1632 | daquino | 2009-12-05 06:58:55 +0000 (Sat, 05 Dec 2009) | 1 line

reduced the list of critical folders to only what is needed to run
------------------------------------------------------------------------
r1633 | daquino | 2009-12-05 06:59:14 +0000 (Sat, 05 Dec 2009) | 1 line

aspect ratio is not used in this file
------------------------------------------------------------------------
r1634 | daquino | 2009-12-05 07:12:58 +0000 (Sat, 05 Dec 2009) | 1 line

fixed bug in last commit; added back aspect ratio cli option
------------------------------------------------------------------------
r1635 | daquino | 2009-12-05 07:13:48 +0000 (Sat, 05 Dec 2009) | 1 line

set aspect ratio only if not set by cli
------------------------------------------------------------------------
r1636 | daquino | 2009-12-05 07:37:52 +0000 (Sat, 05 Dec 2009) | 1 line

fixed bugs in command line parsing; added debug info for unknown options
------------------------------------------------------------------------
r1637 | daquino | 2009-12-05 09:28:23 +0000 (Sat, 05 Dec 2009) | 1 line

small tweak to clean things up and include proper header file.
------------------------------------------------------------------------
r1638 | daquino | 2009-12-05 09:29:21 +0000 (Sat, 05 Dec 2009) | 1 line

fixed bug on reading config file where a key setting had the a name that was also valid as a binding name.  up<->up  down<->down etc...
------------------------------------------------------------------------
r1639 | daquino | 2009-12-06 05:44:47 +0000 (Sun, 06 Dec 2009) | 3 lines

began abstraction process of dsound behind an api.
created SOUND_DSOUND to wrap the implementation.
attempting to move it towards the concepts of buffer/source/listener as in openAL.
------------------------------------------------------------------------
r1640 | daquino | 2009-12-06 05:50:15 +0000 (Sun, 06 Dec 2009) | 1 line

defined a function in the no sound support section so linux would run
------------------------------------------------------------------------
r1641 | daquino | 2009-12-06 06:20:56 +0000 (Sun, 06 Dec 2009) | 2 lines

more cleaning up.
created some functions to remove need to request capabilities of buffers manually.
------------------------------------------------------------------------
r1642 | daquino | 2009-12-06 06:35:20 +0000 (Sun, 06 Dec 2009) | 1 line

more cleaning and created some more abstraction functions for dsound.
------------------------------------------------------------------------
r1643 | daquino | 2009-12-06 06:54:35 +0000 (Sun, 06 Dec 2009) | 1 line

more cleaning up and moving things behind the sound api.
------------------------------------------------------------------------
r1644 | daquino | 2009-12-06 07:19:03 +0000 (Sun, 06 Dec 2009) | 2 lines

more sound cleaning.
at this point there appears to be no dsound specific code at all in sfx.c
------------------------------------------------------------------------
r1645 | daquino | 2009-12-06 09:36:42 +0000 (Sun, 06 Dec 2009) | 4 lines

ported sound timers to sdl timers.
the method I used employed thread safe practices of sending a user event to the queue to call the callback from the same thread.
sfx.c now has no dsound.h or windows.h requirements.
also created sound_caps.min_volume to hold minimum volume
------------------------------------------------------------------------
r1646 | daquino | 2009-12-06 10:04:04 +0000 (Sun, 06 Dec 2009) | 1 line

removed need for <time.h> from the project as we have sdl timers now.
------------------------------------------------------------------------
r1647 | daquino | 2009-12-06 10:08:07 +0000 (Sun, 06 Dec 2009) | 1 line

fixed d3d9 implementation with the gamma table updates.
------------------------------------------------------------------------
r1648 | daquino | 2009-12-06 21:18:30 +0000 (Sun, 06 Dec 2009) | 1 line

updated sound_buffer_load to use sdl for loading wav files.
------------------------------------------------------------------------
r1649 | daquino | 2009-12-06 21:51:19 +0000 (Sun, 06 Dec 2009) | 1 line

sound_load_to_hw was never even used so I deleted it and everything it used that wasn't used anywhere else.
------------------------------------------------------------------------
r1650 | daquino | 2009-12-06 22:02:19 +0000 (Sun, 06 Dec 2009) | 1 line

all buffer loading is now done only to system memory.
------------------------------------------------------------------------
r1651 | daquino | 2009-12-06 22:23:13 +0000 (Sun, 06 Dec 2009) | 1 line

some general code cleaning.
------------------------------------------------------------------------
r1652 | daquino | 2009-12-06 22:47:54 +0000 (Sun, 06 Dec 2009) | 2 lines

completely got rid of the compound sound buffer concept as it was not used.
also got rid of some 3d buffer stuff that was never used.
------------------------------------------------------------------------
r1653 | daquino | 2009-12-06 22:59:29 +0000 (Sun, 06 Dec 2009) | 1 line

apparently the listener is only for 3d sound in dsound so i removed it.
------------------------------------------------------------------------
r1654 | daquino | 2009-12-06 23:09:27 +0000 (Sun, 06 Dec 2009) | 2 lines

apparently the primary buffer isn't needed either.
also removed some code that was pointless now.
------------------------------------------------------------------------
r1655 | daquino | 2009-12-06 23:10:52 +0000 (Sun, 06 Dec 2009) | 1 line

trimming header files
------------------------------------------------------------------------
r1656 | daquino | 2009-12-06 23:15:41 +0000 (Sun, 06 Dec 2009) | 1 line

all the other sound capability detections are not required anymore so removed them.
------------------------------------------------------------------------
r1657 | daquino | 2009-12-06 23:23:21 +0000 (Sun, 06 Dec 2009) | 1 line

moved a bunch of defines back into sfx.c where they belong.
------------------------------------------------------------------------
r1658 | daquino | 2009-12-07 00:25:15 +0000 (Mon, 07 Dec 2009) | 1 line

Did some initial work on the openAL port.
------------------------------------------------------------------------
r1659 | daquino | 2009-12-07 00:28:51 +0000 (Mon, 07 Dec 2009) | 1 line

moved some stuff back into sfx.c where it belongs.
------------------------------------------------------------------------
r1660 | daquino | 2009-12-07 00:36:38 +0000 (Mon, 07 Dec 2009) | 4 lines

realized that sound_source_* was really a forsaken specific code set.
and it relied on nothing more then the sound_buffer_* routines.
so I placed that code back into sfx.c making sound.h completely generic and basic.
should be massively easy at this point to port to openAL!
------------------------------------------------------------------------
r1661 | daquino | 2009-12-07 00:56:09 +0000 (Mon, 07 Dec 2009) | 2 lines

cleaned up the api to make the names shorter and removed winapi specific defines.
updated openal implementation to create a buffer object to pass around.
------------------------------------------------------------------------
r1662 | daquino | 2009-12-07 01:41:26 +0000 (Mon, 07 Dec 2009) | 2 lines

got rid of 3d concepts in dsound that weren't used.
created a generic pointer to replace all the void's.
------------------------------------------------------------------------
r1663 | daquino | 2009-12-07 02:26:54 +0000 (Mon, 07 Dec 2009) | 3 lines

implemented the rest of the openal functions.
and some general sound code cleaning.

------------------------------------------------------------------------
r1664 | daquino | 2009-12-07 04:24:20 +0000 (Mon, 07 Dec 2009) | 3 lines

openAL is now working!
added some debug information.
correctly implemented the sound_duplicate function.
------------------------------------------------------------------------
r1665 | daquino | 2009-12-07 04:42:25 +0000 (Mon, 07 Dec 2009) | 1 line

added openal to the make file
------------------------------------------------------------------------
r1666 | daquino | 2009-12-07 04:43:13 +0000 (Mon, 07 Dec 2009) | 1 line

fixed some bugs found by gcc; passed path to file through path converter to find files in linux
------------------------------------------------------------------------
r1667 | daquino | 2009-12-07 04:46:53 +0000 (Mon, 07 Dec 2009) | 1 line

bug fix in dsound implementation.
------------------------------------------------------------------------
r1668 | daquino | 2009-12-07 07:57:24 +0000 (Mon, 07 Dec 2009) | 6 lines

halfed the size of the dup buffers cause it was going over.
2d support seems to be working well now.
some general code cleaning.
set default mode to 2d.
added a bunch of notes.
fixed a bunch of bugs in the openal version.
------------------------------------------------------------------------
r1669 | daquino | 2009-12-07 08:40:03 +0000 (Mon, 07 Dec 2009) | 1 line

bug fixes to run on gcc
------------------------------------------------------------------------
r1670 | daquino | 2009-12-07 20:22:37 +0000 (Mon, 07 Dec 2009) | 1 line

fixed two areas that would call convert_path consecutively.
------------------------------------------------------------------------
r1671 | daquino | 2009-12-07 20:25:02 +0000 (Mon, 07 Dec 2009) | 1 line

touch_file should not be calling convert_path.
------------------------------------------------------------------------
r1672 | daquino | 2009-12-07 20:37:51 +0000 (Mon, 07 Dec 2009) | 1 line

forgot to rename the variables
------------------------------------------------------------------------
r1673 | daquino | 2009-12-07 20:51:02 +0000 (Mon, 07 Dec 2009) | 1 line

defaulted bpp to 24 because most back buffers can't support 32 and even 32 normally really only uses 24 (8bps * 3 colors) back buffers rarely support an alpha layer...
------------------------------------------------------------------------
r1674 | daquino | 2009-12-07 21:00:27 +0000 (Mon, 07 Dec 2009) | 1 line

fixed reporting of buffer gain.
------------------------------------------------------------------------
r1675 | daquino | 2009-12-07 22:11:28 +0000 (Mon, 07 Dec 2009) | 1 line

Add_Path was only used in one place and better done by sprintf was also a gcc warning.
------------------------------------------------------------------------
r1676 | daquino | 2009-12-07 22:24:13 +0000 (Mon, 07 Dec 2009) | 1 line

some code cleaning.
------------------------------------------------------------------------
r1677 | daquino | 2009-12-08 00:38:33 +0000 (Tue, 08 Dec 2009) | 1 line

make file updates for static builds
------------------------------------------------------------------------
r1678 | daquino | 2009-12-08 01:42:52 +0000 (Tue, 08 Dec 2009) | 1 line

optimized set_color making it go from avg 26% to 1% from gprof output
------------------------------------------------------------------------
r1679 | daquino | 2009-12-08 01:45:27 +0000 (Tue, 08 Dec 2009) | 1 line

some notes on the packing order of COLOR
------------------------------------------------------------------------
r1680 | daquino | 2009-12-08 01:57:57 +0000 (Tue, 08 Dec 2009) | 3 lines

sucked that i accidentally committed this last time.
so might as well leave it here .
i added the win32 code back though.
------------------------------------------------------------------------
r1681 | daquino | 2009-12-08 22:08:47 +0000 (Tue, 08 Dec 2009) | 3 lines

for some reason the non explicit braces where causing the key find loop to fail on some keys only.
i also had to replace the strstr with a more advanced find in case the string doesn't start with a space...
the openal fix is nothing major.
------------------------------------------------------------------------
r1682 | daquino | 2009-12-08 22:32:39 +0000 (Tue, 08 Dec 2009) | 1 line

fixing up example configs to use new formats
------------------------------------------------------------------------
r1683 | daquino | 2009-12-08 22:33:27 +0000 (Tue, 08 Dec 2009) | 1 line

fixing up example config to have right syntax and created a the default player.txt
------------------------------------------------------------------------
r1684 | daquino | 2009-12-08 22:40:29 +0000 (Tue, 08 Dec 2009) | 1 line

added definition of keys and a docs sub folder.
------------------------------------------------------------------------
r1685 | daquino | 2009-12-08 23:02:17 +0000 (Tue, 08 Dec 2009) | 1 line

renamed and moved some things around.
------------------------------------------------------------------------
r1686 | daquino | 2009-12-09 02:20:40 +0000 (Wed, 09 Dec 2009) | 1 line

renamed symbol file so configurations don't overlap.
------------------------------------------------------------------------
r1687 | daquino | 2009-12-09 02:25:00 +0000 (Wed, 09 Dec 2009) | 6 lines

renamed a bunch of things and move code around.
sdl now handles enumerating display modes, for window mode it defaults to a built in list.
commented out the code in d3d9 that use to the do the enumerations of display modes.
fixed some areas that was not setting pointers to null after freeing.
reloading now goes through sdl_init_video()
disabled code in Msg() completely as it's not very stable.
------------------------------------------------------------------------
r1688 | daquino | 2009-12-09 02:32:59 +0000 (Wed, 09 Dec 2009) | 1 line

added eol-style to files that did not have them 
------------------------------------------------------------------------
r1689 | daquino | 2009-12-09 02:52:07 +0000 (Wed, 09 Dec 2009) | 5 lines

got rid of the rate option.
it wasn't even used in d3d9 just enumerated.
it's pretty dangerous to change it anyway.
and sdl doesn't support it.
also fixed black screen on opengl res change in win32.
------------------------------------------------------------------------
r1690 | daquino | 2009-12-09 02:55:50 +0000 (Wed, 09 Dec 2009) | 1 line

-g and -pg are separate options
------------------------------------------------------------------------
r1691 | daquino | 2009-12-09 03:10:45 +0000 (Wed, 09 Dec 2009) | 1 line

killed an old config file
------------------------------------------------------------------------
r1692 | daquino | 2009-12-09 22:32:28 +0000 (Wed, 09 Dec 2009) | 1 line

added support for larger range of systems by removing arch=native compiler option
------------------------------------------------------------------------
r1693 | daquino | 2009-12-09 22:54:30 +0000 (Wed, 09 Dec 2009) | 1 line

removed redudant arguments
------------------------------------------------------------------------
r1694 | lion | 2009-12-11 04:04:31 +0000 (Fri, 11 Dec 2009) | 2 lines

Fixed DebugPrintf on non-Windows systems.

------------------------------------------------------------------------
r1695 | lion | 2009-12-11 04:12:18 +0000 (Fri, 11 Dec 2009) | 8 lines

Added anaglyph stereoscopic 3D rendering capability for OpenGL mode.

New stereo-related configuration options:
  - StereoEnabled
  - StereoEyeSep
  - StereoFocalDist
  - StereoRightColor

------------------------------------------------------------------------
r1696 | lion | 2009-12-11 15:26:51 +0000 (Fri, 11 Dec 2009) | 5 lines

Added stereo configuration options to title -> visuals menu.

Repositioned a few existing items in that menu in order to make
things fit.

------------------------------------------------------------------------
r1697 | lion | 2009-12-11 15:40:19 +0000 (Fri, 11 Dec 2009) | 4 lines

Renamed CENTER, LEFT, and RIGHT enum values to ST_CENTER, ST_LEFT,
and ST_RIGHT in order to avoid some potential name clashes and to
make it a bit more obvious that they are related to stereo mode.

------------------------------------------------------------------------
r1698 | daquino | 2009-12-12 18:22:07 +0000 (Sat, 12 Dec 2009) | 1 line

unused function.
------------------------------------------------------------------------
r1699 | daquino | 2009-12-12 18:58:50 +0000 (Sat, 12 Dec 2009) | 1 line

added the openal installer for windows systems.
------------------------------------------------------------------------
r1700 | lion | 2009-12-12 20:55:39 +0000 (Sat, 12 Dec 2009) | 4 lines

Removed an #ifdef OPENGL around a helper variable introduced for the
stereo feature but still used even if stereo/OpenGL is not compiled
in, which would cause a broken build without OPENGL defined.

------------------------------------------------------------------------
r1701 | lion | 2009-12-12 21:37:26 +0000 (Sat, 12 Dec 2009) | 2 lines

Added M_PI_2 macro to include/new3d.h since it's non-standard.

------------------------------------------------------------------------
r1702 | daquino | 2009-12-12 21:43:23 +0000 (Sat, 12 Dec 2009) | 2 lines

added forceaccel cli option for sdl/opengl settings.
had to not enable SDL_GL_ACCELERATED_VISUAL by default cause bdb's video card freaks out and paints red on every vertex.
------------------------------------------------------------------------
r1703 | daquino | 2009-12-12 22:01:09 +0000 (Sat, 12 Dec 2009) | 3 lines

fixed a few bugs.
pushed the debugprintf changes to win32.

------------------------------------------------------------------------
r1704 | daquino | 2009-12-13 07:33:02 +0000 (Sun, 13 Dec 2009) | 3 lines

enabled stereo rendering in d3d9.
created render_set_filter for d3d9.
but stereo does not appear to work.
------------------------------------------------------------------------
r1705 | daquino | 2009-12-13 17:37:17 +0000 (Sun, 13 Dec 2009) | 2 lines

quit requested should not have been manually called.
app now properly dies when close window button is called.
------------------------------------------------------------------------
r1706 | daquino | 2009-12-13 17:43:29 +0000 (Sun, 13 Dec 2009) | 1 line

starting some basic work on joystick porting to sdl.
------------------------------------------------------------------------
r1707 | daquino | 2009-12-13 18:07:19 +0000 (Sun, 13 Dec 2009) | 5 lines

got rid of the portable config as we can just test on linux directly now.
got rid of the opengl build as the open config builds opengl.
renamed the debug config to d3d.
deleted the breakpad config as it's not needed for now.
created debug js config for working on sdl joystick.
------------------------------------------------------------------------
r1708 | daquino | 2009-12-13 20:16:39 +0000 (Sun, 13 Dec 2009) | 4 lines

moved some things to input.h
created generic names for joystick setup and cleanup.
ported  joysticks_init and joysticks_cleanup to sdl.
enabled joystick support in sdl.
------------------------------------------------------------------------
r1709 | daquino | 2009-12-13 20:43:45 +0000 (Sun, 13 Dec 2009) | 3 lines

moved some more stuff to input.h
enabled ReleaseJoysticks in dinput and ported code to joysticks_cleanup for sdl.

------------------------------------------------------------------------
r1710 | daquino | 2009-12-13 20:49:43 +0000 (Sun, 13 Dec 2009) | 1 line

more explicit function for testing.
------------------------------------------------------------------------
r1711 | daquino | 2009-12-13 22:09:31 +0000 (Sun, 13 Dec 2009) | 1 line

fixed a bunch of bugs in the clean up system.
------------------------------------------------------------------------
r1712 | daquino | 2009-12-13 22:13:54 +0000 (Sun, 13 Dec 2009) | 1 line

fixed a bunch of bugs in the joystick init system.
------------------------------------------------------------------------
r1713 | daquino | 2009-12-13 22:51:03 +0000 (Sun, 13 Dec 2009) | 3 lines

stopped config.c from assigning joystick axises read from config file that don't exist in JoystickInfo which contains all enumerated joystick axises.
made joysticks_cleanup() default all settings removing need for other buggy techniques.
fixed a routine in title.c which was blindly attempting to copy a string even if it didn't exist.  but the fix to config.c should remove the situation of it never existing.
------------------------------------------------------------------------
r1714 | daquino | 2009-12-13 23:47:17 +0000 (Sun, 13 Dec 2009) | 1 line

cleaned and moved some things around.
------------------------------------------------------------------------
r1715 | daquino | 2009-12-14 01:01:56 +0000 (Mon, 14 Dec 2009) | 1 line

ported ReadJoystickInput and CheckJoyAxis to use sdl joystick axis data.
------------------------------------------------------------------------
r1716 | daquino | 2009-12-14 01:06:33 +0000 (Mon, 14 Dec 2009) | 1 line

shortened joystick axis calculation.
------------------------------------------------------------------------
r1717 | daquino | 2009-12-14 01:20:12 +0000 (Mon, 14 Dec 2009) | 1 line

added joysticks to the array of joy axis data.
------------------------------------------------------------------------
r1718 | daquino | 2009-12-14 01:24:03 +0000 (Mon, 14 Dec 2009) | 1 line

some comment updates.
------------------------------------------------------------------------
r1719 | daquino | 2009-12-14 03:12:17 +0000 (Mon, 14 Dec 2009) | 6 lines

ported joystick button held/pressed macros to sdl.
created joy_button_state[] table for holding current state of joystick buttons.
created a js_buttons[] table for storing last/new input tables.
rename keyboard_buffer related functions/tables to input_buffer as the table stores events for all input related devices.
added some protection from accessing invalid array indices in state tables.
fixed some bugs.
------------------------------------------------------------------------
r1720 | daquino | 2009-12-14 05:41:32 +0000 (Mon, 14 Dec 2009) | 4 lines

ported pov/hat code to sdl.
ported macro's for pov held/pressed/released
created js_pov for new/old input and joy_hat_state for sdl state.
created generic input_buffer_send to help send input_buffer events.
------------------------------------------------------------------------
r1721 | daquino | 2009-12-14 05:53:00 +0000 (Mon, 14 Dec 2009) | 1 line

ported rest of code to use the new input_buffer_send() function.
------------------------------------------------------------------------
r1722 | daquino | 2009-12-14 06:04:07 +0000 (Mon, 14 Dec 2009) | 1 line

updating default folders
------------------------------------------------------------------------
r1723 | daquino | 2009-12-14 06:11:14 +0000 (Mon, 14 Dec 2009) | 2 lines

removed the debug_js config and moved sdl input to debug_open.
d3d config still supports dinput for now.
------------------------------------------------------------------------
r1724 | daquino | 2009-12-14 06:21:01 +0000 (Mon, 14 Dec 2009) | 1 line

udpating docs
------------------------------------------------------------------------
r1725 | daquino | 2009-12-14 06:23:05 +0000 (Mon, 14 Dec 2009) | 1 line

notes updates
------------------------------------------------------------------------
r1726 | daquino | 2009-12-14 06:23:56 +0000 (Mon, 14 Dec 2009) | 1 line

updating docs
------------------------------------------------------------------------
r1727 | daquino | 2009-12-14 06:26:15 +0000 (Mon, 14 Dec 2009) | 1 line

updated install docs
------------------------------------------------------------------------
r1728 | daquino | 2009-12-14 06:48:33 +0000 (Mon, 14 Dec 2009) | 1 line

docs folder isnt needed
------------------------------------------------------------------------
r1729 | daquino | 2009-12-14 21:57:51 +0000 (Mon, 14 Dec 2009) | 1 line

fixed bug where we end up in an endless loop trying to quit.
------------------------------------------------------------------------
r1730 | daquino | 2009-12-14 22:02:19 +0000 (Mon, 14 Dec 2009) | 1 line

loading bad config should not disable axis's if you ask me.
------------------------------------------------------------------------
r1731 | daquino | 2009-12-14 22:09:53 +0000 (Mon, 14 Dec 2009) | 1 line

updating comment notes.
------------------------------------------------------------------------
r1732 | lion | 2009-12-14 22:36:45 +0000 (Mon, 14 Dec 2009) | 2 lines

Set listener gain to 0.5 to eliminate or reduce sound crackling/blasting.

------------------------------------------------------------------------
r1733 | daquino | 2009-12-14 23:15:31 +0000 (Mon, 14 Dec 2009) | 1 line

added some comments.
------------------------------------------------------------------------
r1734 | daquino | 2009-12-15 21:41:07 +0000 (Tue, 15 Dec 2009) | 1 line

fixed menu state handling bug that would require two key strokes in many areas.
------------------------------------------------------------------------
r1735 | daquino | 2009-12-15 22:01:25 +0000 (Tue, 15 Dec 2009) | 1 line

fixed null pointer check in menu processing.
------------------------------------------------------------------------
r1736 | daquino | 2009-12-15 22:55:47 +0000 (Tue, 15 Dec 2009) | 1 line

created a helper function to fire off the onselect callback for a menu item.
------------------------------------------------------------------------
r1737 | daquino | 2009-12-15 23:37:16 +0000 (Tue, 15 Dec 2009) | 1 line

created a function to return the ascii character of a key with a helper table that maps keys (including number pad) to their ascii name.
------------------------------------------------------------------------
r1738 | daquino | 2009-12-16 00:16:36 +0000 (Wed, 16 Dec 2009) | 3 lines

enabled modifiers in text input mode.
thus you are now able to type symbols such as $ using shift+key.
made the input_buffer* routines to use an int instead of SDL_keysym.
------------------------------------------------------------------------
r1739 | daquino | 2009-12-16 00:45:42 +0000 (Wed, 16 Dec 2009) | 1 line

added support for typing capital letters in text entry.
------------------------------------------------------------------------
r1740 | daquino | 2009-12-16 00:48:00 +0000 (Wed, 16 Dec 2009) | 1 line

stopped window mode from grabbing mouse if we are in menu.
------------------------------------------------------------------------
r1741 | daquino | 2009-12-16 22:50:42 +0000 (Wed, 16 Dec 2009) | 4 lines

removed confusing 1 to 1 mappings in the key map table.
they were defaults for when sdl didn't return anything.
but were miss leading to humans and computers apparently.
this fixes the usage of the number keys at the top of the keyboard.
------------------------------------------------------------------------
r1742 | daquino | 2009-12-16 23:30:07 +0000 (Wed, 16 Dec 2009) | 1 line

added support for joystick deadzones.
------------------------------------------------------------------------
r1743 | daquino | 2009-12-17 23:40:54 +0000 (Thu, 17 Dec 2009) | 3 lines

factored out some code form get_key_name into a generic convert_char function.
fixed KEY_MAP_LAST it was 1 to big.
fixed init_key_map to set proper item to null.
------------------------------------------------------------------------
r1744 | daquino | 2009-12-19 17:51:48 +0000 (Sat, 19 Dec 2009) | 1 line

added cli to debug output.
------------------------------------------------------------------------
r1745 | daquino | 2009-12-19 17:53:10 +0000 (Sat, 19 Dec 2009) | 1 line

fixed a missing define.
------------------------------------------------------------------------
r1746 | daquino | 2009-12-20 15:18:41 +0000 (Sun, 20 Dec 2009) | 2 lines

renamed and fixed various bugs in sound functions.
assigned SpotSfxList[i].buffersize fixing missing sounds.
------------------------------------------------------------------------
r1747 | daquino | 2009-12-20 15:41:50 +0000 (Sun, 20 Dec 2009) | 1 line

cleaned up some pointless code.
------------------------------------------------------------------------
r1748 | daquino | 2009-12-20 15:45:59 +0000 (Sun, 20 Dec 2009) | 1 line

cleaning up some unused variables
------------------------------------------------------------------------
r1749 | daquino | 2009-12-20 15:49:35 +0000 (Sun, 20 Dec 2009) | 1 line

network patch job better than crashing
------------------------------------------------------------------------
r1750 | daquino | 2009-12-20 16:51:16 +0000 (Sun, 20 Dec 2009) | 2 lines

fixed detection of which device a key comes from in the menu keyboard assignment page.
fixed the page to show "left mouse" instead of "mouse" for all mouse buttons.
------------------------------------------------------------------------
r1751 | daquino | 2009-12-20 17:21:21 +0000 (Sun, 20 Dec 2009) | 1 line

stopping re-init of sound to fix hang in pulseaudio
------------------------------------------------------------------------
r1752 | daquino | 2009-12-20 17:24:25 +0000 (Sun, 20 Dec 2009) | 1 line

some bug fixes.
------------------------------------------------------------------------
r1753 | daquino | 2009-12-20 17:34:19 +0000 (Sun, 20 Dec 2009) | 1 line

unused variable.
------------------------------------------------------------------------
r1754 | daquino | 2009-12-20 19:50:46 +0000 (Sun, 20 Dec 2009) | 1 line

fixed nme2 texture so that transparency works correctly
------------------------------------------------------------------------
r1755 | daquino | 2009-12-21 03:27:12 +0000 (Mon, 21 Dec 2009) | 1 line

fixed FindFreeLoopingSfxBuffer to use a buffer that is not playing.
------------------------------------------------------------------------
r1756 | daquino | 2009-12-21 03:29:12 +0000 (Mon, 21 Dec 2009) | 1 line

removing over verbose debug messages.
------------------------------------------------------------------------
r1757 | daquino | 2009-12-21 15:50:35 +0000 (Mon, 21 Dec 2009) | 1 line

fixed ability to select the highest resolution.
------------------------------------------------------------------------
r1758 | daquino | 2009-12-21 17:02:54 +0000 (Mon, 21 Dec 2009) | 1 line

array was not large enough for last item.
------------------------------------------------------------------------
r1759 | daquino | 2009-12-21 18:55:38 +0000 (Mon, 21 Dec 2009) | 1 line

stopped score from showing up if the menu is showing.
------------------------------------------------------------------------
r1760 | daquino | 2009-12-21 19:58:13 +0000 (Mon, 21 Dec 2009) | 1 line

fixed bug that allowed you to start a null/non-existent level
------------------------------------------------------------------------
r1761 | daquino | 2009-12-21 20:04:20 +0000 (Mon, 21 Dec 2009) | 1 line

added proper exit status to the game.
------------------------------------------------------------------------
r1762 | daquino | 2009-12-21 21:58:53 +0000 (Mon, 21 Dec 2009) | 1 line

cleaning up the debug lines to make more sense.
------------------------------------------------------------------------
r1763 | daquino | 2009-12-22 01:10:34 +0000 (Tue, 22 Dec 2009) | 9 lines

sounds are not limited to 2 instances anymore.
completely removed the concept of dup buffers.
all sound is now completely dynamic being loaded when needed.
sound_buffers[] is an array containing unique buffers indexed by sfx number.
at this point sound_source_* was completely not required and was removed.
new sound sources are created referencing the existing buffer if it exists.
reworked sound_duplicate function to malloc the source for us.
cleaned up SpotSfxList properly in DestroySound().
added more debugging.
------------------------------------------------------------------------
r1764 | daquino | 2009-12-22 01:47:45 +0000 (Tue, 22 Dec 2009) | 1 line

fixed bug where key_name() returns null.
------------------------------------------------------------------------
r1765 | daquino | 2009-12-22 01:50:28 +0000 (Tue, 22 Dec 2009) | 2 lines

fixed sound stats debug routines.
added counts for playing/stopped.
------------------------------------------------------------------------
r1766 | daquino | 2009-12-22 02:03:59 +0000 (Tue, 22 Dec 2009) | 1 line

stopped SpotSfxList items from being unloaded if they are to far away.
------------------------------------------------------------------------
r1767 | daquino | 2009-12-22 02:50:34 +0000 (Tue, 22 Dec 2009) | 2 lines

got rid of a bug that was apparently setting the listener to position 0,0,0 every time a new sound was loaded.
got rid of extra debugging info on sound_load that isn't needed.
------------------------------------------------------------------------
r1768 | lion | 2009-12-22 20:44:18 +0000 (Tue, 22 Dec 2009) | 8 lines

Makefile changes / additions:
- Added option to use the Mudflap pointer use checking library.
- Profiling is now controlled by new separate option, independent
  of debug mode.
- Define _FORTIFY_SOURCE=2 and enable -fstack-protector-all when
  compiling in debug mode.
- Added some missing indentation for conditionals.

------------------------------------------------------------------------
r1769 | daquino | 2009-12-23 21:44:08 +0000 (Wed, 23 Dec 2009) | 3 lines

added looping sound back in.
got rid of all threaded routines.
got rid of the pointless sbufferlist stuff.
------------------------------------------------------------------------
r1770 | daquino | 2009-12-23 23:35:14 +0000 (Wed, 23 Dec 2009) | 1 line

fixed tracking of how many buffers exist.
------------------------------------------------------------------------
r1771 | daquino | 2009-12-24 21:19:12 +0000 (Thu, 24 Dec 2009) | 4 lines

cleaned up some of the init code.
re-enabled freeing of non playing looping sfx source.
removed some misleading comments.

------------------------------------------------------------------------
r1772 | daquino | 2009-12-24 21:22:23 +0000 (Thu, 24 Dec 2009) | 2 lines

added a member to the sound_t struct to properly check if a sound is playing, problem is that when a sound runs out it stops it self but our counters are not updated, with the new member we know if we set it to play before.
fixed the sound volume by restoring value of sound_minimum_volume, previously this was resulting in sounds being played at full volume.
------------------------------------------------------------------------
r1773 | daquino | 2009-12-27 20:32:04 +0000 (Sun, 27 Dec 2009) | 1 line

enabled the wireframe cli option.
------------------------------------------------------------------------
r1774 | daquino | 2010-02-15 17:35:34 +0000 (Mon, 15 Feb 2010) | 2 lines

added fix for mouse lag in computers that render to fast.
frames go faster than mouse input so you have to let the value hang around for a bit because forsaken formulas need it to be smoothed out across frames.
------------------------------------------------------------------------
r1775 | daquino | 2010-02-15 18:32:08 +0000 (Mon, 15 Feb 2010) | 1 line

allowed up to 255 mouse buttons; fixed up some code order
------------------------------------------------------------------------
r1776 | daquino | 2010-02-15 19:34:54 +0000 (Mon, 15 Feb 2010) | 1 line

fixed send message bug that would require you to hit the return button realllllly fast. now it will only start again after 0.8% of a second has passed
------------------------------------------------------------------------
r1777 | daquino | 2010-02-15 19:53:57 +0000 (Mon, 15 Feb 2010) | 1 line

set vsync to be the default and switched the -vsync option to -novsync; by default show fps is now off
------------------------------------------------------------------------
r1778 | daquino | 2010-02-15 19:55:59 +0000 (Mon, 15 Feb 2010) | 1 line

some comment cleaning
------------------------------------------------------------------------
r1779 | daquino | 2010-02-15 20:24:28 +0000 (Mon, 15 Feb 2010) | 1 line

fixed save game slots for single player
------------------------------------------------------------------------
r1780 | daquino | 2010-02-15 20:46:47 +0000 (Mon, 15 Feb 2010) | 1 line

made in game hud show kills as the default metric; added menu option to switch it to real score mode which shows total of positives - negatives
------------------------------------------------------------------------
r1781 | daquino | 2010-02-16 23:19:32 +0000 (Tue, 16 Feb 2010) | 1 line

documentation updates
------------------------------------------------------------------------
r1782 | daquino | 2010-02-18 21:56:11 +0000 (Thu, 18 Feb 2010) | 1 line

added [shift+f12] next to toggle fullscreen buttons for poeple to know about it
------------------------------------------------------------------------
r1783 | daquino | 2010-02-18 22:21:25 +0000 (Thu, 18 Feb 2010) | 1 line

better gamma debug messages and ability to set gamma to 300
------------------------------------------------------------------------
